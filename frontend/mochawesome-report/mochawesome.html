<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:6,&quot;tests&quot;:76,&quot;passes&quot;:50,&quot;pending&quot;:0,&quot;failures&quot;:26,&quot;testsRegistered&quot;:76,&quot;passPercent&quot;:65.78947368421052,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false,&quot;start&quot;:&quot;2024-04-05T15:24:39.135Z&quot;,&quot;end&quot;:&quot;2024-04-05T15:26:50.343Z&quot;,&quot;duration&quot;:131208},&quot;results&quot;:[{&quot;uuid&quot;:&quot;7e85db83-1fdb-4ce1-8488-385b5e79a143&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;cypress/e2e/frontend/add-product.cy.js&quot;,&quot;file&quot;:&quot;cypress/e2e/frontend/add-product.cy.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;81eb9efb-45a4-4b29-96e1-0597ddde94d4&quot;,&quot;title&quot;:&quot;Page /products/add&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;post product&quot;,&quot;fullTitle&quot;:&quot;Page /products/add post product&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:409,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Note : Test le scénario d&#x27;un ajout de produit réussi\ncy.visit(url, {\n  onBeforeLoad: function (window) {\n    window.localStorage.setItem(\&quot;token\&quot;, _tokens.aliceToken);\n  }\n});\n(0, _orm.createProduct)().then(({\n  originalProduct,\n  product\n}) =&gt; {\n  cy.get(\&quot;[data-test-product-name]\&quot;).type(product.name);\n  cy.get(\&quot;[data-test-product-description]\&quot;).type(product.description);\n  cy.get(\&quot;[data-test-product-category]\&quot;).type(product.category);\n  cy.get(\&quot;[data-test-product-price]\&quot;).type(product.originalPrice);\n  cy.get(\&quot;[data-test-product-picture]\&quot;).type(\&quot;{selectAll}{del}\&quot;);\n  cy.get(\&quot;[data-test-product-picture]\&quot;).type(product.pictureUrl);\n  cy.get(\&quot;[data-test-product-end-date]\&quot;).type((0, _automate.prepareDateToType)(originalProduct.endDate));\n  cy.intercept(\&quot;POST\&quot;, \&quot;http://localhost:3000/api/products\&quot;).as(\&quot;postProduct\&quot;);\n  cy.get(\&quot;[data-test-submit]\&quot;).click();\n  cy.wait(\&quot;@postProduct\&quot;).then(interception =&gt; {\n    expect(interception.response.statusCode).to.eq(201);\n    const id = interception.response.body.id;\n    cy.url().should(\&quot;contain\&quot;, `/products/${id}`);\n  });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;59725297-0151-4017-935e-57e27e18eb20&quot;,&quot;parentUUID&quot;:&quot;81eb9efb-45a4-4b29-96e1-0597ddde94d4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;display spinner&quot;,&quot;fullTitle&quot;:&quot;Page /products/add display spinner&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:97,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Note : Test la présence d&#x27;un spinner lors de l&#x27;envoi de la requête\ncy.visit(url, {\n  onBeforeLoad: function (window) {\n    window.localStorage.setItem(\&quot;token\&quot;, _tokens.aliceToken);\n  }\n});\n(0, _orm.createProduct)().then(({\n  originalProduct,\n  product\n}) =&gt; {\n  cy.get(\&quot;[data-test-product-name]\&quot;).type(product.name);\n  cy.get(\&quot;[data-test-product-description]\&quot;).type(product.description);\n  cy.get(\&quot;[data-test-product-category]\&quot;).type(product.category);\n  cy.get(\&quot;[data-test-product-price]\&quot;).type(product.originalPrice);\n  cy.get(\&quot;[data-test-product-picture]\&quot;).type(\&quot;{selectAll}{del}\&quot;);\n  cy.get(\&quot;[data-test-product-picture]\&quot;).type(product.pictureUrl);\n  cy.get(\&quot;[data-test-product-end-date]\&quot;).type((0, _automate.prepareDateToType)(originalProduct.endDate));\n  cy.intercept(\&quot;POST\&quot;, \&quot;http://localhost:3000/api/products\&quot;, {\n    delay: 2000\n  }).as(\&quot;postProduct\&quot;);\n  cy.get(\&quot;[data-test-submit]\&quot;).click();\n  cy.get(\&quot;[data-test-submit]\&quot;).should(\&quot;have.attr\&quot;, \&quot;disabled\&quot;);\n  cy.get(\&quot;[data-test-spinner]\&quot;).should(\&quot;exist\&quot;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b6b841cc-d852-42ae-9ea3-658b25ea90f4&quot;,&quot;parentUUID&quot;:&quot;81eb9efb-45a4-4b29-96e1-0597ddde94d4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;display error&quot;,&quot;fullTitle&quot;:&quot;Page /products/add display error&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:4338,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Note : Test le scénario d&#x27;un ajout de produit avec un échec\ncy.visit(url, {\n  onBeforeLoad: function (window) {\n    window.localStorage.setItem(\&quot;token\&quot;, _tokens.aliceToken);\n  }\n});\ncy.get(\&quot;[data-test-error]\&quot;).should(\&quot;not.exist\&quot;);\n(0, _orm.createProduct)().then(({\n  originalProduct,\n  product\n}) =&gt; {\n  cy.get(\&quot;[data-test-product-name]\&quot;).type(product.name);\n  cy.get(\&quot;[data-test-product-description]\&quot;).type(product.description);\n  cy.get(\&quot;[data-test-product-category]\&quot;).type(product.category);\n  cy.get(\&quot;[data-test-product-price]\&quot;).type(product.originalPrice);\n  cy.get(\&quot;[data-test-product-picture]\&quot;).type(\&quot;{selectAll}{del}\&quot;);\n  cy.get(\&quot;[data-test-product-picture]\&quot;).type(product.pictureUrl);\n  cy.get(\&quot;[data-test-product-end-date]\&quot;).type((0, _automate.prepareDateToType)(originalProduct.endDate));\n  cy.intercept(\&quot;POST\&quot;, \&quot;http://localhost:3000/api/products\&quot;, {\n    statusCode: 500\n  }).as(\&quot;postProduct\&quot;);\n  cy.get(\&quot;[data-test-submit]\&quot;).click();\n  cy.get(\&quot;[data-test-error]\&quot;).should(\&quot;exist\&quot;);\n});&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: Timed out retrying after 4000ms: Expected &lt;div.alert.alert-danger.mt-4&gt; not to exist in the DOM, but it was continuously found.&quot;,&quot;estack&quot;:&quot;AssertionError: Timed out retrying after 4000ms: Expected &lt;div.alert.alert-danger.mt-4&gt; not to exist in the DOM, but it was continuously found.\n    at Context.eval (webpack://frontend/./cypress/e2e/frontend/add-product.cy.js:86:32)&quot;,&quot;diff&quot;:null},&quot;uuid&quot;:&quot;cea0894a-8750-4370-b77d-f2032218f3f8&quot;,&quot;parentUUID&quot;:&quot;81eb9efb-45a4-4b29-96e1-0597ddde94d4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;59725297-0151-4017-935e-57e27e18eb20&quot;,&quot;b6b841cc-d852-42ae-9ea3-658b25ea90f4&quot;],&quot;failures&quot;:[&quot;cea0894a-8750-4370-b77d-f2032218f3f8&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4844,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0113e952-17b8-49be-97b4-8a2c04bfe6b2&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;cypress/e2e/frontend/edit-product.cy.js&quot;,&quot;file&quot;:&quot;cypress/e2e/frontend/edit-product.cy.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;40132a47-87d9-4251-92c8-7aebf631d10a&quot;,&quot;title&quot;:&quot;Page /products/:productId/edit&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;post product&quot;,&quot;fullTitle&quot;:&quot;Page /products/:productId/edit post product&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:68,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;(0, _orm.createProduct)().then(({\n  product\n}) =&gt; {\n  // Note : Test le scénario de modification de produit réussi\n  cy.visit(`http://localhost:5173/products/${product.id}/edit`, {\n    onBeforeLoad: function (window) {\n      window.localStorage.setItem(\&quot;token\&quot;, _tokens.aliceToken);\n    }\n  });\n  const newProduct = (0, _orm.buildProduct)();\n  cy.get(\&quot;[data-test-product-name]\&quot;).type(\&quot;{selectAll}{del}\&quot;);\n  cy.get(\&quot;[data-test-product-name]\&quot;).type(newProduct.name);\n  cy.get(\&quot;[data-test-product-description]\&quot;).type(\&quot;{selectAll}{del}\&quot;);\n  cy.get(\&quot;[data-test-product-description]\&quot;).type(newProduct.description);\n  cy.get(\&quot;[data-test-product-category]\&quot;).type(\&quot;{selectAll}{del}\&quot;);\n  cy.get(\&quot;[data-test-product-category]\&quot;).type(newProduct.category);\n  cy.get(\&quot;[data-test-product-price]\&quot;).type(\&quot;{selectAll}{del}\&quot;);\n  cy.get(\&quot;[data-test-product-price]\&quot;).type(newProduct.originalPrice);\n  cy.get(\&quot;[data-test-product-picture]\&quot;).type(\&quot;{selectAll}{del}\&quot;);\n  cy.get(\&quot;[data-test-product-picture]\&quot;).type(newProduct.pictureUrl);\n  cy.get(\&quot;[data-test-product-end-date]\&quot;).type(\&quot;{selectAll}{del}\&quot;);\n  cy.get(\&quot;[data-test-product-end-date]\&quot;).type((0, _automate.prepareDateToType)(newProduct.endDate));\n  cy.intercept(\&quot;PUT\&quot;, \&quot;http://localhost:3000/api/products/\&quot; + product.id).as(\&quot;putProduct\&quot;);\n  cy.get(\&quot;[data-test-submit]\&quot;).click();\n  cy.wait(\&quot;@putProduct\&quot;).then(interception =&gt; {\n    expect(interception.response.statusCode).to.eq(200);\n    const id = interception.response.body.id;\n    cy.url().should(\&quot;contain\&quot;, `/products/${id}`);\n  });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0498673e-3125-4a96-8b89-e516cce1d3f3&quot;,&quot;parentUUID&quot;:&quot;40132a47-87d9-4251-92c8-7aebf631d10a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;display spinner&quot;,&quot;fullTitle&quot;:&quot;Page /products/:productId/edit display spinner&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:29,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Note : Test la présence d&#x27;un spinner lors de l&#x27;envoi de la requête\n(0, _orm.createProduct)().then(({\n  product\n}) =&gt; {\n  cy.visit(`http://localhost:5173/products/${product.id}/edit`, {\n    onBeforeLoad: function (window) {\n      window.localStorage.setItem(\&quot;token\&quot;, _tokens.aliceToken);\n    }\n  });\n  const newProduct = (0, _orm.buildProduct)();\n  cy.get(\&quot;[data-test-product-name]\&quot;).type(\&quot;{selectAll}{del}\&quot;);\n  cy.get(\&quot;[data-test-product-name]\&quot;).type(newProduct.name);\n  cy.get(\&quot;[data-test-product-description]\&quot;).type(\&quot;{selectAll}{del}\&quot;);\n  cy.get(\&quot;[data-test-product-description]\&quot;).type(newProduct.description);\n  cy.get(\&quot;[data-test-product-category]\&quot;).type(\&quot;{selectAll}{del}\&quot;);\n  cy.get(\&quot;[data-test-product-category]\&quot;).type(newProduct.category);\n  cy.get(\&quot;[data-test-product-price]\&quot;).type(\&quot;{selectAll}{del}\&quot;);\n  cy.get(\&quot;[data-test-product-price]\&quot;).type(newProduct.originalPrice);\n  cy.get(\&quot;[data-test-product-picture]\&quot;).type(\&quot;{selectAll}{del}\&quot;);\n  cy.get(\&quot;[data-test-product-picture]\&quot;).type(newProduct.pictureUrl);\n  cy.get(\&quot;[data-test-product-end-date]\&quot;).type(\&quot;{selectAll}{del}\&quot;);\n  cy.get(\&quot;[data-test-product-end-date]\&quot;).type((0, _automate.prepareDateToType)(newProduct.endDate));\n  cy.intercept(\&quot;PUT\&quot;, \&quot;http://localhost:3000/api/products/\&quot; + product.id, {\n    delay: 2000\n  }).as(\&quot;putProduct\&quot;);\n  cy.get(\&quot;[data-test-submit]\&quot;).click();\n  cy.get(\&quot;[data-test-submit]\&quot;).should(\&quot;have.attr\&quot;, \&quot;disabled\&quot;);\n  cy.get(\&quot;[data-test-spinner]\&quot;).should(\&quot;exist\&quot;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9ee74bf7-0b2a-40ae-8aa9-8411da9d6c9c&quot;,&quot;parentUUID&quot;:&quot;40132a47-87d9-4251-92c8-7aebf631d10a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;display error&quot;,&quot;fullTitle&quot;:&quot;Page /products/:productId/edit display error&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:27,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Note : Test le scénario d&#x27;un ajout de produit avec un échec\n(0, _orm.createProduct)().then(({\n  product\n}) =&gt; {\n  cy.visit(`http://localhost:5173/products/${product.id}/edit`, {\n    onBeforeLoad: function (window) {\n      window.localStorage.setItem(\&quot;token\&quot;, _tokens.aliceToken);\n    }\n  });\n  cy.get(\&quot;[data-test-error]\&quot;).should(\&quot;not.exist\&quot;);\n  const newProduct = (0, _orm.buildProduct)();\n  cy.get(\&quot;[data-test-product-name]\&quot;).type(\&quot;{selectAll}{del}\&quot;);\n  cy.get(\&quot;[data-test-product-name]\&quot;).type(newProduct.name);\n  cy.get(\&quot;[data-test-product-description]\&quot;).type(\&quot;{selectAll}{del}\&quot;);\n  cy.get(\&quot;[data-test-product-description]\&quot;).type(newProduct.description);\n  cy.get(\&quot;[data-test-product-category]\&quot;).type(\&quot;{selectAll}{del}\&quot;);\n  cy.get(\&quot;[data-test-product-category]\&quot;).type(newProduct.category);\n  cy.get(\&quot;[data-test-product-price]\&quot;).type(\&quot;{selectAll}{del}\&quot;);\n  cy.get(\&quot;[data-test-product-price]\&quot;).type(newProduct.originalPrice);\n  cy.get(\&quot;[data-test-product-picture]\&quot;).type(\&quot;{selectAll}{del}\&quot;);\n  cy.get(\&quot;[data-test-product-picture]\&quot;).type(newProduct.pictureUrl);\n  cy.get(\&quot;[data-test-product-end-date]\&quot;).type(\&quot;{selectAll}{del}\&quot;);\n  cy.get(\&quot;[data-test-product-end-date]\&quot;).type((0, _automate.prepareDateToType)(newProduct.endDate));\n  cy.intercept(\&quot;PUT\&quot;, \&quot;http://localhost:3000/api/products/\&quot; + product.id, {\n    statusCode: 500\n  }).as(\&quot;putProduct\&quot;);\n  cy.get(\&quot;[data-test-submit]\&quot;).click();\n  cy.get(\&quot;[data-test-error]\&quot;).should(\&quot;exist\&quot;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;78caf7ca-dcd0-4182-a8c7-090f03241100&quot;,&quot;parentUUID&quot;:&quot;40132a47-87d9-4251-92c8-7aebf631d10a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0498673e-3125-4a96-8b89-e516cce1d3f3&quot;,&quot;9ee74bf7-0b2a-40ae-8aa9-8411da9d6c9c&quot;,&quot;78caf7ca-dcd0-4182-a8c7-090f03241100&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:124,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5357b50f-cd4a-45ef-9583-c36d58fad9ef&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;cypress/e2e/frontend/home.cy.js&quot;,&quot;file&quot;:&quot;cypress/e2e/frontend/home.cy.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;31f07bc9-d424-4e8d-b98f-72585a34cc75&quot;,&quot;title&quot;:&quot;Page /&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;fetch products&quot;,&quot;fullTitle&quot;:&quot;Page / fetch products&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:499,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Note : Test le scénario de récupération et d&#x27;affichage de tous les produits\ncy.visit(url);\ncy.get(\&quot;[data-test-product]\&quot;).should(\&quot;have.length\&quot;, 17);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9787fffd-b475-49f4-bf7c-162e7c12d35b&quot;,&quot;parentUUID&quot;:&quot;31f07bc9-d424-4e8d-b98f-72585a34cc75&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;display product with past end date and last bid price&quot;,&quot;fullTitle&quot;:&quot;Page / display product with past end date and last bid price&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:36,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Note : Vérifie que tous les éléments d&#x27;un produit sont bien affichés\n// Note : Si la date de fin est passée, afficher \&quot;Terminé\&quot;\n// Note : Si une offre existe pour le produit, afficher \&quot;Prix actuel : &lt;montant de l&#x27;offre&gt;\&quot;\n(0, _orm.createProduct)(\&quot;past\&quot;).then(({\n  product\n}) =&gt; {\n  (0, _orm.createBid)(product.id, product.originalPrice, _tokens.bobToken).then(({\n    bid\n  }) =&gt; {\n    cy.visit(url);\n    cy.get(\&quot;[data-test-product]\&quot;).should(\&quot;have.length\&quot;, 18);\n    cy.get(`[data-test-product-name]:contains(\&quot;${name}\&quot;)`).should(\&quot;exist\&quot;).first().closest(\&quot;[data-test-product]\&quot;).then(el =&gt; {\n      cy.wrap(el).find(\&quot;[data-test-product-name]\&quot;).invoke(\&quot;attr\&quot;, \&quot;href\&quot;).should(\&quot;include\&quot;, product.id);\n      cy.wrap(el).find(\&quot;[data-test-product-description]\&quot;).should(\&quot;have.text\&quot;, product.description);\n      cy.wrap(el).find(\&quot;[data-test-product-seller]\&quot;).should(\&quot;have.text\&quot;, \&quot;alice\&quot;).invoke(\&quot;attr\&quot;, \&quot;href\&quot;).should(\&quot;include\&quot;, _tokens.aliceId);\n      cy.wrap(el).find(\&quot;[data-test-product-date]\&quot;).should(\&quot;contain.text\&quot;, \&quot;Terminé\&quot;);\n      cy.wrap(el).find(\&quot;[data-test-product-price]\&quot;).should(\&quot;contain.text\&quot;, \&quot;Prix actuel\&quot;).should(\&quot;contain.text\&quot;, \&quot; \&quot; + bid.price + \&quot; €\&quot;);\n    });\n  }).catch(() =&gt; {\n    expect.fail(\&quot;Bid creation fail\&quot;);\n  });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;10d00700-9993-488b-9b8b-f6ef0c6dc5d7&quot;,&quot;parentUUID&quot;:&quot;31f07bc9-d424-4e8d-b98f-72585a34cc75&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;display product with futur end date and original price (cause there not yet any bid)&quot;,&quot;fullTitle&quot;:&quot;Page / display product with futur end date and original price (cause there not yet any bid)&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:34,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Note : Vérifie que tous les éléments d&#x27;un produit sont bien affichés\n// Note : Si la date de fin n&#x27;est pas passée, afficher \&quot;En cours jusqu&#x27;au &lt;date de fin&gt;\&quot;\n// Note : Si aucune une offre n&#x27;existe pour le produit, afficher \&quot;Prix de départ : &lt;prix de départ&gt;\&quot;\n(0, _orm.createProduct)().then(({\n  product\n}) =&gt; {\n  cy.visit(url);\n  cy.get(\&quot;[data-test-product]\&quot;).should(\&quot;have.length\&quot;, 18);\n  cy.get(`[data-test-product-name]:contains(\&quot;${name}\&quot;)`).should(\&quot;exist\&quot;).first().closest(\&quot;[data-test-product]\&quot;).then(el =&gt; {\n    cy.wrap(el).find(\&quot;[data-test-product-description]\&quot;).should(\&quot;have.text\&quot;, product.description);\n    cy.wrap(el).find(\&quot;[data-test-product-seller]\&quot;).should(\&quot;have.text\&quot;, \&quot;alice\&quot;).invoke(\&quot;attr\&quot;, \&quot;href\&quot;).should(\&quot;include\&quot;, _tokens.aliceId);\n    cy.wrap(el).find(\&quot;[data-test-product-date]\&quot;).should(\&quot;contain.text\&quot;, \&quot;En cours jusqu&#x27;au\&quot;);\n    cy.wrap(el).find(\&quot;[data-test-product-price]\&quot;).should(\&quot;contain.text\&quot;, \&quot;Prix de départ\&quot;).should(\&quot;contain.text\&quot;, \&quot; \&quot; + product.originalPrice + \&quot; €\&quot;);\n  });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e456fcc0-d4de-46d2-8a94-ea7c280ff412&quot;,&quot;parentUUID&quot;:&quot;31f07bc9-d424-4e8d-b98f-72585a34cc75&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;filter by name&quot;,&quot;fullTitle&quot;:&quot;Page / filter by name&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:4709,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Note : Vérifie le filtrage par nom, insensible à la casse\ncy.visit(url);\ncy.get(\&quot;[data-test-product]\&quot;).should(\&quot;have.length\&quot;, 17);\ncy.get(\&quot;[data-test-filter\&quot;).type(\&quot;Lot\&quot;);\ncy.get(\&quot;[data-test-product]\&quot;).should(\&quot;have.length\&quot;, 3);\ncy.get(\&quot;[data-test-filter\&quot;).type(\&quot;{selectAll}{del}\&quot;);\ncy.get(\&quot;[data-test-filter\&quot;).type(\&quot;lot\&quot;);\ncy.get(\&quot;[data-test-product]\&quot;).should(\&quot;have.length\&quot;, 3);\ncy.get(\&quot;[data-test-filter\&quot;).type(\&quot;{selectAll}{del}\&quot;);\ncy.get(\&quot;[data-test-filter\&quot;).type(\&quot;lot de tasses\&quot;);\ncy.get(\&quot;[data-test-product]\&quot;).should(\&quot;have.length\&quot;, 1);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: Timed out retrying after 4000ms: Too many elements found. Found &#x27;17&#x27;, expected &#x27;3&#x27;.&quot;,&quot;estack&quot;:&quot;AssertionError: Timed out retrying after 4000ms: Too many elements found. Found &#x27;17&#x27;, expected &#x27;3&#x27;.\n    at Context.eval (webpack://frontend/./cypress/e2e/frontend/home.cy.js:112:34)&quot;,&quot;diff&quot;:&quot;- 17\n+ 3\n&quot;},&quot;uuid&quot;:&quot;a0536885-b954-4d3c-9349-7f61b19cbb14&quot;,&quot;parentUUID&quot;:&quot;31f07bc9-d424-4e8d-b98f-72585a34cc75&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;sort by name&quot;,&quot;fullTitle&quot;:&quot;Page / sort by name&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:4490,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Note : Vérifie le tri par nom, alphabétique de A à Z\ncy.visit(url);\ncy.get(\&quot;[data-test-sorter]\&quot;).should(\&quot;contain.text\&quot;, \&quot;Trier par nom\&quot;);\ncy.get(\&quot;[data-test-product]\&quot;).first().find(\&quot;[data-test-product-name]\&quot;).should(\&quot;have.text\&quot;, \&quot;Ampli de guitare\&quot;);\ncy.get(\&quot;[data-test-product]\&quot;).last().find(\&quot;[data-test-product-name]\&quot;).should(\&quot;have.text\&quot;, \&quot;Théière design\&quot;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: Timed out retrying after 4000ms: expected &#x27;&lt;a&gt;&#x27; to have text &#x27;Ampli de guitare&#x27;, but the text was &#x27; Machine à écrire &#x27;&quot;,&quot;estack&quot;:&quot;AssertionError: Timed out retrying after 4000ms: expected &#x27;&lt;a&gt;&#x27; to have text &#x27;Ampli de guitare&#x27;, but the text was &#x27; Machine à écrire &#x27;\n    at Context.eval (webpack://frontend/./cypress/e2e/frontend/home.cy.js:133:7)&quot;,&quot;diff&quot;:&quot;- &#x27; Machine à écrire &#x27;\n+ &#x27;Ampli de guitare&#x27;\n&quot;},&quot;uuid&quot;:&quot;62bd62b4-6760-4345-8027-ca0f4e7ae590&quot;,&quot;parentUUID&quot;:&quot;31f07bc9-d424-4e8d-b98f-72585a34cc75&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;sort by price&quot;,&quot;fullTitle&quot;:&quot;Page / sort by price&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:4629,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Note : Vérifie le tri par prix, numérique croissant\ncy.visit(url);\ncy.get(\&quot;[data-test-sorter]\&quot;).click();\ncy.get(\&quot;[data-test-sorter-price]\&quot;).click();\ncy.get(\&quot;[data-test-sorter]\&quot;).should(\&quot;contain.text\&quot;, \&quot;Trier par prix\&quot;);\ncy.get(\&quot;[data-test-product]\&quot;).first().find(\&quot;[data-test-product-name]\&quot;).should(\&quot;have.text\&quot;, \&quot;Ananas\&quot;);\ncy.get(\&quot;[data-test-product]\&quot;).last().find(\&quot;[data-test-product-name]\&quot;).should(\&quot;have.text\&quot;, \&quot;Chaussures volantes\&quot;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: Timed out retrying after 4000ms: expected &#x27;&lt;button.btn.btn-primary.dropdown-toggle&gt;&#x27; to contain text &#x27;Trier par prix&#x27;, but the text was &#x27; Trier par nom &#x27;&quot;,&quot;estack&quot;:&quot;AssertionError: Timed out retrying after 4000ms: expected &#x27;&lt;button.btn.btn-primary.dropdown-toggle&gt;&#x27; to contain text &#x27;Trier par prix&#x27;, but the text was &#x27; Trier par nom &#x27;\n    at Context.eval (webpack://frontend/./cypress/e2e/frontend/home.cy.js:149:33)&quot;,&quot;diff&quot;:&quot;- &#x27; Trier par nom &#x27;\n+ &#x27;Trier par prix&#x27;\n&quot;},&quot;uuid&quot;:&quot;c2a88c54-3bee-4010-befb-1e05800823d4&quot;,&quot;parentUUID&quot;:&quot;31f07bc9-d424-4e8d-b98f-72585a34cc75&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;loading&quot;,&quot;fullTitle&quot;:&quot;Page / loading&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:4306,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Note : Test la présence d&#x27;un spinner lors du chargement\ncy.intercept(\&quot;http://localhost:3000/api/products\&quot;, {\n  delay: 10000\n});\ncy.visit(url);\ncy.get(\&quot;[data-test-loading]\&quot;).should(\&quot;exist\&quot;);\ncy.get(\&quot;[data-test-error]\&quot;).should(\&quot;not.exist\&quot;);\ncy.get(\&quot;[data-test-product]\&quot;).should(\&quot;not.exist\&quot;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: Timed out retrying after 4000ms: Expected &lt;div.alert.alert-danger.mt-4&gt; not to exist in the DOM, but it was continuously found.&quot;,&quot;estack&quot;:&quot;AssertionError: Timed out retrying after 4000ms: Expected &lt;div.alert.alert-danger.mt-4&gt; not to exist in the DOM, but it was continuously found.\n    at Context.eval (webpack://frontend/./cypress/e2e/frontend/home.cy.js:172:32)&quot;,&quot;diff&quot;:null},&quot;uuid&quot;:&quot;fd3b7d2b-604d-48c2-9ecf-ac2cc848fa30&quot;,&quot;parentUUID&quot;:&quot;31f07bc9-d424-4e8d-b98f-72585a34cc75&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;error message&quot;,&quot;fullTitle&quot;:&quot;Page / error message&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:4405,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Note : Test la présence d&#x27;un message d&#x27;erreur en cas d&#x27;échec au chargement\ncy.intercept(\&quot;http://localhost:3000/api/products\&quot;, {\n  status: 500,\n  response: {}\n});\ncy.visit(url);\ncy.get(\&quot;[data-test-loading]\&quot;).should(\&quot;not.exist\&quot;);\ncy.get(\&quot;[data-test-error]\&quot;).should(\&quot;exist\&quot;);\ncy.get(\&quot;[data-test-product]\&quot;).should(\&quot;not.exist\&quot;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: Timed out retrying after 4000ms: Expected &lt;div.text-center.mt-4&gt; not to exist in the DOM, but it was continuously found.&quot;,&quot;estack&quot;:&quot;AssertionError: Timed out retrying after 4000ms: Expected &lt;div.text-center.mt-4&gt; not to exist in the DOM, but it was continuously found.\n    at Context.eval (webpack://frontend/./cypress/e2e/frontend/home.cy.js:186:34)&quot;,&quot;diff&quot;:null},&quot;uuid&quot;:&quot;bcc527f3-c4a6-45bb-9854-31e341a5d0b5&quot;,&quot;parentUUID&quot;:&quot;31f07bc9-d424-4e8d-b98f-72585a34cc75&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;ready&quot;,&quot;fullTitle&quot;:&quot;Page / ready&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:4476,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Note : Test la présence du contenu après que tout est bien chargé\ncy.intercept(\&quot;http://localhost:3000/api/products\&quot;);\ncy.visit(url);\ncy.get(\&quot;[data-test-loading]\&quot;).should(\&quot;not.exist\&quot;);\ncy.get(\&quot;[data-test-error]\&quot;).should(\&quot;not.exist\&quot;);\ncy.get(\&quot;[data-test-product]\&quot;).should(\&quot;exist\&quot;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: Timed out retrying after 4000ms: Expected &lt;div.text-center.mt-4&gt; not to exist in the DOM, but it was continuously found.&quot;,&quot;estack&quot;:&quot;AssertionError: Timed out retrying after 4000ms: Expected &lt;div.text-center.mt-4&gt; not to exist in the DOM, but it was continuously found.\n    at Context.eval (webpack://frontend/./cypress/e2e/frontend/home.cy.js:198:34)&quot;,&quot;diff&quot;:null},&quot;uuid&quot;:&quot;a59eb7f5-f987-4676-85a4-04f23770e320&quot;,&quot;parentUUID&quot;:&quot;31f07bc9-d424-4e8d-b98f-72585a34cc75&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9787fffd-b475-49f4-bf7c-162e7c12d35b&quot;,&quot;10d00700-9993-488b-9b8b-f6ef0c6dc5d7&quot;,&quot;e456fcc0-d4de-46d2-8a94-ea7c280ff412&quot;],&quot;failures&quot;:[&quot;a0536885-b954-4d3c-9349-7f61b19cbb14&quot;,&quot;62bd62b4-6760-4345-8027-ca0f4e7ae590&quot;,&quot;c2a88c54-3bee-4010-befb-1e05800823d4&quot;,&quot;fd3b7d2b-604d-48c2-9ecf-ac2cc848fa30&quot;,&quot;bcc527f3-c4a6-45bb-9854-31e341a5d0b5&quot;,&quot;a59eb7f5-f987-4676-85a4-04f23770e320&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:27584,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;620ecb52-7fb5-443b-ac4a-e44a732b5655&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;cypress/e2e/frontend/user.cy.js&quot;,&quot;file&quot;:&quot;cypress/e2e/frontend/user.cy.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;db6507dd-00b2-49c0-9171-cc58090a8864&quot;,&quot;title&quot;:&quot;Page /users/:userId&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;display products&quot;,&quot;fullTitle&quot;:&quot;Page /users/:userId display products&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:54,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Note : Test le scénario de récupération et d&#x27;affichage des produits\n(0, _orm.createProduct)().then(({\n  product\n}) =&gt; {\n  cy.visit(`http://localhost:5173/users/${_tokens.aliceId}`);\n  cy.get(\&quot;[data-test-product]\&quot;).should(\&quot;have.length\&quot;, 8);\n  cy.get(\&quot;[data-test-product]\&quot;).last().find(\&quot;[data-test-product-name]\&quot;).should(\&quot;have.text\&quot;, product.name).invoke(\&quot;attr\&quot;, \&quot;href\&quot;).should(\&quot;contain\&quot;, product.id);\n  cy.get(\&quot;[data-test-product]\&quot;).last().find(\&quot;[data-test-product-description]\&quot;).should(\&quot;have.text\&quot;, product.description);\n  cy.get(\&quot;[data-test-product]\&quot;).last().find(\&quot;[data-test-product-price]\&quot;).should(\&quot;contain.text\&quot;, product.originalPrice + \&quot; €\&quot;);\n  cy.get(\&quot;[data-test-product]\&quot;).last().find(\&quot;[data-test-product-picture]\&quot;).invoke(\&quot;attr\&quot;, \&quot;src\&quot;).should(\&quot;eq\&quot;, product.pictureUrl);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ce88d081-a4bf-44d2-89d8-6121ac2da327&quot;,&quot;parentUUID&quot;:&quot;db6507dd-00b2-49c0-9171-cc58090a8864&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;display bids&quot;,&quot;fullTitle&quot;:&quot;Page /users/:userId display bids&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:31,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Note : Test le scénario de récupération et d&#x27;affichage des offres\n(0, _orm.createProduct)(\&quot;futur\&quot;, _tokens.bobToken).then(({\n  product\n}) =&gt; {\n  (0, _orm.createBid)(product.id, product.originalPrice, _tokens.aliceToken).then(({\n    bid\n  }) =&gt; {\n    cy.visit(`http://localhost:5173/users/${_tokens.aliceId}`);\n    cy.get(\&quot;[data-test-bid]\&quot;).should(\&quot;exist\&quot;);\n    cy.get(`[data-test-bid-product][href$=\&quot;${product.id}\&quot;]`).should(\&quot;exist\&quot;).first().closest(\&quot;[data-test-bid]\&quot;).then(el =&gt; {\n      cy.wrap(el).find(\&quot;[data-test-bid-product]\&quot;).should(\&quot;have.text\&quot;, product.name);\n      cy.wrap(el).find(\&quot;[data-test-bid-price]\&quot;).should(\&quot;have.text\&quot;, bid.price + \&quot; €\&quot;);\n      cy.wrap(el).find(\&quot;[data-test-bid-date]\&quot;).should(\&quot;contain.text\&quot;, new Date().getDate()).should(\&quot;contain.text\&quot;, new Date().getMonth() + 1).should(\&quot;contain.text\&quot;, new Date().getFullYear());\n    });\n  });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2f9dbc15-75cb-4b0e-b5e0-11a390f971ce&quot;,&quot;parentUUID&quot;:&quot;db6507dd-00b2-49c0-9171-cc58090a8864&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;no admin badge&quot;,&quot;fullTitle&quot;:&quot;Page /users/:userId no admin badge&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:4533,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Note : Vérifie qu&#x27;un utilisateur a un badge admin si et seulement si il est admin\ncy.visit(`http://localhost:5173/users/${_tokens.aliceId}`);\ncy.get(\&quot;[data-test-admin]\&quot;).should(\&quot;not.exist\&quot;);\ncy.visit(`http://localhost:5173/users/${_tokens.adminId}`);\ncy.get(\&quot;[data-test-admin]\&quot;).should(\&quot;exist\&quot;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: Timed out retrying after 4000ms: Expected &lt;span.badge.rounded-pill.bg-primary&gt; not to exist in the DOM, but it was continuously found.&quot;,&quot;estack&quot;:&quot;AssertionError: Timed out retrying after 4000ms: Expected &lt;span.badge.rounded-pill.bg-primary&gt; not to exist in the DOM, but it was continuously found.\n    at Context.eval (webpack://frontend/./cypress/e2e/frontend/user.cy.js:88:32)&quot;,&quot;diff&quot;:null},&quot;uuid&quot;:&quot;cb86bc77-bc45-442e-856e-db949d99cbd4&quot;,&quot;parentUUID&quot;:&quot;db6507dd-00b2-49c0-9171-cc58090a8864&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;loading&quot;,&quot;fullTitle&quot;:&quot;Page /users/:userId loading&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:4364,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Note : Vérifie la présence d&#x27;un spinner au chargement\ncy.intercept(`http://localhost:3000/api/users/${_tokens.aliceId}`, {\n  delay: 10000\n});\ncy.visit(`http://localhost:5173/users/${_tokens.aliceId}`);\ncy.get(\&quot;[data-test-loading]\&quot;).should(\&quot;exist\&quot;);\ncy.get(\&quot;[data-test-view]\&quot;).should(\&quot;not.exist\&quot;);\ncy.get(\&quot;[data-test-error]\&quot;).should(\&quot;not.exist\&quot;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: Timed out retrying after 4000ms: Expected &lt;div&gt; not to exist in the DOM, but it was continuously found.&quot;,&quot;estack&quot;:&quot;AssertionError: Timed out retrying after 4000ms: Expected &lt;div&gt; not to exist in the DOM, but it was continuously found.\n    at Context.eval (webpack://frontend/./cypress/e2e/frontend/user.cy.js:105:31)&quot;,&quot;diff&quot;:null},&quot;uuid&quot;:&quot;75d6d501-d04d-425b-afae-5a0e2688a62d&quot;,&quot;parentUUID&quot;:&quot;db6507dd-00b2-49c0-9171-cc58090a8864&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;error&quot;,&quot;fullTitle&quot;:&quot;Page /users/:userId error&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:4338,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Note : Vérifie la présence d&#x27;une erreur en cas d&#x27;échec de chargement\ncy.intercept(`http://localhost:3000/api/users/${_tokens.aliceId}`, {\n  statusCode: 500\n});\ncy.visit(`http://localhost:5173/users/${_tokens.aliceId}`);\ncy.get(\&quot;[data-test-error]\&quot;).should(\&quot;exist\&quot;);\ncy.get(\&quot;[data-test-loading]\&quot;).should(\&quot;not.exist\&quot;);\ncy.get(\&quot;[data-test-view]\&quot;).should(\&quot;not.exist\&quot;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: Timed out retrying after 4000ms: Expected &lt;div.text-center&gt; not to exist in the DOM, but it was continuously found.&quot;,&quot;estack&quot;:&quot;AssertionError: Timed out retrying after 4000ms: Expected &lt;div.text-center&gt; not to exist in the DOM, but it was continuously found.\n    at Context.eval (webpack://frontend/./cypress/e2e/frontend/user.cy.js:119:34)&quot;,&quot;diff&quot;:null},&quot;uuid&quot;:&quot;3c890ab7-df87-41fe-a846-bdb572134f96&quot;,&quot;parentUUID&quot;:&quot;db6507dd-00b2-49c0-9171-cc58090a8864&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;ready&quot;,&quot;fullTitle&quot;:&quot;Page /users/:userId ready&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:4325,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Note : Vérifie la présence du contenu quand tout s&#x27;est bien chargé\ncy.visit(`http://localhost:5173/users/${_tokens.aliceId}`);\ncy.get(\&quot;[data-test-error]\&quot;).should(\&quot;not.exist\&quot;);\ncy.get(\&quot;[data-test-loading]\&quot;).should(\&quot;not.exist\&quot;);\ncy.get(\&quot;[data-test-view]\&quot;).should(\&quot;exist\&quot;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: Timed out retrying after 4000ms: Expected &lt;div.alert.alert-danger.mt-3&gt; not to exist in the DOM, but it was continuously found.&quot;,&quot;estack&quot;:&quot;AssertionError: Timed out retrying after 4000ms: Expected &lt;div.alert.alert-danger.mt-3&gt; not to exist in the DOM, but it was continuously found.\n    at Context.eval (webpack://frontend/./cypress/e2e/frontend/user.cy.js:128:32)&quot;,&quot;diff&quot;:null},&quot;uuid&quot;:&quot;ef2d044a-bb37-4f6a-b0df-b83a1635f5c4&quot;,&quot;parentUUID&quot;:&quot;db6507dd-00b2-49c0-9171-cc58090a8864&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ce88d081-a4bf-44d2-89d8-6121ac2da327&quot;,&quot;2f9dbc15-75cb-4b0e-b5e0-11a390f971ce&quot;],&quot;failures&quot;:[&quot;cb86bc77-bc45-442e-856e-db949d99cbd4&quot;,&quot;75d6d501-d04d-425b-afae-5a0e2688a62d&quot;,&quot;3c890ab7-df87-41fe-a846-bdb572134f96&quot;,&quot;ef2d044a-bb37-4f6a-b0df-b83a1635f5c4&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:17645,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7be7bc1f-7b3d-4ba1-80b1-d8f2795612e5&quot;,&quot;title&quot;:&quot;Page /users/me&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;me as alice&quot;,&quot;fullTitle&quot;:&quot;Page /users/me me as alice&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:4339,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Note : Vérifie que le contenu de la page est bien celui de l&#x27;utilisateur courant\ncy.visit(`http://localhost:5173/users/me`, {\n  onBeforeLoad: function (window) {\n    window.localStorage.setItem(\&quot;token\&quot;, _tokens.aliceToken);\n  }\n});\ncy.get(\&quot;[data-test-username]\&quot;).should(\&quot;contain.text\&quot;, \&quot;alice\&quot;);\ncy.get(\&quot;[data-test-product]\&quot;).should(\&quot;have.length\&quot;, 7);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: Timed out retrying after 4000ms: expected &#x27;&lt;h1.text-center&gt;&#x27; to contain text &#x27;alice&#x27;, but the text was &#x27; Utilisateur charly Admin&#x27;&quot;,&quot;estack&quot;:&quot;AssertionError: Timed out retrying after 4000ms: expected &#x27;&lt;h1.text-center&gt;&#x27; to contain text &#x27;alice&#x27;, but the text was &#x27; Utilisateur charly Admin&#x27;\n    at Context.eval (webpack://frontend/./cypress/e2e/frontend/user.cy.js:144:35)&quot;,&quot;diff&quot;:&quot;- &#x27; Utilisateur charly Admin&#x27;\n+ &#x27;alice&#x27;\n&quot;},&quot;uuid&quot;:&quot;d3eb2fb6-6848-4cd8-bd2b-b23ff2c29cc9&quot;,&quot;parentUUID&quot;:&quot;7be7bc1f-7b3d-4ba1-80b1-d8f2795612e5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;me as bob&quot;,&quot;fullTitle&quot;:&quot;Page /users/me me as bob&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:4331,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Note : Vérifie que le contenu de la page est bien celui de l&#x27;utilisateur courant\ncy.visit(`http://localhost:5173/users/me`, {\n  onBeforeLoad: function (window) {\n    window.localStorage.setItem(\&quot;token\&quot;, _tokens.bobToken);\n  }\n});\ncy.get(\&quot;[data-test-username]\&quot;).should(\&quot;contain.text\&quot;, \&quot;bob\&quot;);\ncy.get(\&quot;[data-test-product]\&quot;).should(\&quot;have.length\&quot;, 3);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: Timed out retrying after 4000ms: expected &#x27;&lt;h1.text-center&gt;&#x27; to contain text &#x27;bob&#x27;, but the text was &#x27; Utilisateur charly Admin&#x27;&quot;,&quot;estack&quot;:&quot;AssertionError: Timed out retrying after 4000ms: expected &#x27;&lt;h1.text-center&gt;&#x27; to contain text &#x27;bob&#x27;, but the text was &#x27; Utilisateur charly Admin&#x27;\n    at Context.eval (webpack://frontend/./cypress/e2e/frontend/user.cy.js:157:35)&quot;,&quot;diff&quot;:&quot;- &#x27; Utilisateur charly Admin&#x27;\n+ &#x27;bob&#x27;\n&quot;},&quot;uuid&quot;:&quot;f782a841-6597-4138-bb33-dc295cefd635&quot;,&quot;parentUUID&quot;:&quot;7be7bc1f-7b3d-4ba1-80b1-d8f2795612e5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;me as admin&quot;,&quot;fullTitle&quot;:&quot;Page /users/me me as admin&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:4329,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Note : Vérifie que le contenu de la page est bien celui de l&#x27;utilisateur courant\ncy.visit(`http://localhost:5173/users/me`, {\n  onBeforeLoad: function (window) {\n    window.localStorage.setItem(\&quot;token\&quot;, _tokens.adminToken);\n  }\n});\ncy.get(\&quot;[data-test-username]\&quot;).should(\&quot;contain.text\&quot;, \&quot;admin\&quot;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: Timed out retrying after 4000ms: expected &#x27;&lt;h1.text-center&gt;&#x27; to contain text &#x27;admin&#x27;, but the text was &#x27; Utilisateur charly Admin&#x27;&quot;,&quot;estack&quot;:&quot;AssertionError: Timed out retrying after 4000ms: expected &#x27;&lt;h1.text-center&gt;&#x27; to contain text &#x27;admin&#x27;, but the text was &#x27; Utilisateur charly Admin&#x27;\n    at Context.eval (webpack://frontend/./cypress/e2e/frontend/user.cy.js:170:35)&quot;,&quot;diff&quot;:&quot;- &#x27; Utilisateur charly Admin&#x27;\n+ &#x27;admin&#x27;\n&quot;},&quot;uuid&quot;:&quot;eb738015-d8ac-4038-9303-4859903b74b0&quot;,&quot;parentUUID&quot;:&quot;7be7bc1f-7b3d-4ba1-80b1-d8f2795612e5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;d3eb2fb6-6848-4cd8-bd2b-b23ff2c29cc9&quot;,&quot;f782a841-6597-4138-bb33-dc295cefd635&quot;,&quot;eb738015-d8ac-4038-9303-4859903b74b0&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12999,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6d11dc9c-6015-449b-bc05-b360d59adc59&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;cypress/e2e/frontend/view-product.cy.js&quot;,&quot;file&quot;:&quot;cypress/e2e/frontend/view-product.cy.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c720fd84-04bb-4e88-b441-3b04069b5fee&quot;,&quot;title&quot;:&quot;Page /products/:productId&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;display product&quot;,&quot;fullTitle&quot;:&quot;Page /products/:productId display product&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:64,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Note : Vérifie que tous les éléments du produit sont bien affichés\n(0, _orm.createProduct)().then(({\n  originalProduct,\n  product\n}) =&gt; {\n  cy.visit(`http://localhost:5173/products/${product.id}`);\n  cy.get(\&quot;[data-test-product-name]\&quot;).should(\&quot;have.text\&quot;, product.name);\n  cy.get(\&quot;[data-test-product-description]\&quot;).should(\&quot;have.text\&quot;, product.description);\n  cy.get(\&quot;[data-test-product-picture]\&quot;).invoke(\&quot;attr\&quot;, \&quot;src\&quot;).should(\&quot;eq\&quot;, product.pictureUrl);\n  cy.get(\&quot;[data-test-product-price]\&quot;).should(\&quot;contain.text\&quot;, product.originalPrice + \&quot; €\&quot;);\n  cy.get(\&quot;[data-test-product-end-date]\&quot;).should(\&quot;contain.text\&quot;, originalProduct.endDate.toLocaleDateString(\&quot;fr-FR\&quot;, {\n    year: \&quot;numeric\&quot;,\n    month: \&quot;long\&quot;,\n    day: \&quot;numeric\&quot;\n  }));\n  cy.get(\&quot;[data-test-product-seller]\&quot;).should(\&quot;have.text\&quot;, \&quot;alice\&quot;).invoke(\&quot;attr\&quot;, \&quot;href\&quot;).should(\&quot;contain\&quot;, _tokens.aliceId);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6e3e6cf6-72ce-4390-bed5-ecf5d15a0afc&quot;,&quot;parentUUID&quot;:&quot;c720fd84-04bb-4e88-b441-3b04069b5fee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;finished countdown&quot;,&quot;fullTitle&quot;:&quot;Page /products/:productId finished countdown&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:35,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Note : Si la date de fin de vente est passée, on affiche \&quot;Terminé\&quot;\n(0, _orm.createProduct)(\&quot;past\&quot;).then(({\n  product\n}) =&gt; {\n  cy.visit(`http://localhost:5173/products/${product.id}`);\n  cy.get(\&quot;[data-test-countdown]\&quot;).should(\&quot;contain.text\&quot;, \&quot;Terminé\&quot;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f47369ac-ad21-488b-8437-6d979254e2cf&quot;,&quot;parentUUID&quot;:&quot;c720fd84-04bb-4e88-b441-3b04069b5fee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;not finished countdown&quot;,&quot;fullTitle&quot;:&quot;Page /products/:productId not finished countdown&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:29,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Note : Si la date de fin de vente est passée, on n&#x27;affiche pas \&quot;Terminé\&quot;\n(0, _orm.createProduct)(\&quot;futur\&quot;).then(({\n  product\n}) =&gt; {\n  cy.visit(`http://localhost:5173/products/${product.id}`);\n  cy.get(\&quot;[data-test-countdown]\&quot;).should(\&quot;not.contain.text\&quot;, \&quot;Terminé\&quot;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d5b56a76-21b4-4a05-9565-f9e42e380061&quot;,&quot;parentUUID&quot;:&quot;c720fd84-04bb-4e88-b441-3b04069b5fee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;display bids&quot;,&quot;fullTitle&quot;:&quot;Page /products/:productId display bids&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:32,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Note : Vérifie que tous les éléments des offres du produit sont bien affichés\n(0, _orm.createBid)(_tokens.casserolesId, 200, _tokens.bobToken).then(({\n  bid\n}) =&gt; {\n  cy.visit(`http://localhost:5173/products/${_tokens.casserolesId}`);\n  cy.get(\&quot;[data-test-bid]\&quot;).should(\&quot;have.length\&quot;, 4);\n  cy.get(\&quot;[data-test-bid]\&quot;).first().find(\&quot;[data-test-bid-bidder]\&quot;).should(\&quot;have.text\&quot;, \&quot;charly\&quot;).invoke(\&quot;attr\&quot;, \&quot;href\&quot;).should(\&quot;contain\&quot;, _tokens.charlyId);\n  cy.get(\&quot;[data-test-bid]\&quot;).first().find(\&quot;[data-test-bid-price]\&quot;).should(\&quot;contain.text\&quot;, \&quot;65 €\&quot;);\n  cy.get(\&quot;[data-test-bid]\&quot;).last().find(\&quot;[data-test-bid-bidder]\&quot;).should(\&quot;have.text\&quot;, \&quot;bob\&quot;).invoke(\&quot;attr\&quot;, \&quot;href\&quot;).should(\&quot;contain\&quot;, _tokens.bobId);\n  cy.get(\&quot;[data-test-bid]\&quot;).last().find(\&quot;[data-test-bid-price]\&quot;).should(\&quot;contain.text\&quot;, bid.price + \&quot; €\&quot;);\n  cy.get(\&quot;[data-test-bid]\&quot;).last().find(\&quot;[data-test-bid-date]\&quot;).should(\&quot;contain.text\&quot;, new Date().toLocaleDateString(\&quot;fr-FR\&quot;, {\n    year: \&quot;numeric\&quot;,\n    month: \&quot;long\&quot;,\n    day: \&quot;numeric\&quot;\n  }));\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6f8870ac-9921-4d3f-bae0-106dbaa9f1c2&quot;,&quot;parentUUID&quot;:&quot;c720fd84-04bb-4e88-b441-3b04069b5fee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;some bids&quot;,&quot;fullTitle&quot;:&quot;Page /products/:productId some bids&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:4526,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Note : Si au moins une offre existe, on affiche le tableau\ncy.visit(`http://localhost:5173/products/${_tokens.casserolesId}`);\ncy.get(\&quot;[data-test-bids]\&quot;).should(\&quot;exist\&quot;);\ncy.get(\&quot;[data-test-no-bids]\&quot;).should(\&quot;not.exist\&quot;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: Timed out retrying after 4000ms: Expected &lt;p&gt; not to exist in the DOM, but it was continuously found.&quot;,&quot;estack&quot;:&quot;AssertionError: Timed out retrying after 4000ms: Expected &lt;p&gt; not to exist in the DOM, but it was continuously found.\n    at Context.eval (webpack://frontend/./cypress/e2e/frontend/view-product.cy.js:128:34)&quot;,&quot;diff&quot;:null},&quot;uuid&quot;:&quot;bf7b25c4-c996-42c4-b0a1-e896560808fe&quot;,&quot;parentUUID&quot;:&quot;c720fd84-04bb-4e88-b441-3b04069b5fee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;no bids&quot;,&quot;fullTitle&quot;:&quot;Page /products/:productId no bids&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:32,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;(0, _orm.createProduct)().then(({\n  product\n}) =&gt; {\n  // Note : Si aucune une offre ,&#x27;existe, on masque le tableau\n  cy.visit(`http://localhost:5173/products/${product.id}`);\n  cy.get(\&quot;[data-test-bids]\&quot;).should(\&quot;not.exist\&quot;);\n  cy.get(\&quot;[data-test-no-bids]\&quot;).should(\&quot;exist\&quot;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f891b677-fd4e-4b95-8174-6dd6ef88d975&quot;,&quot;parentUUID&quot;:&quot;c720fd84-04bb-4e88-b441-3b04069b5fee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;only seller and admin can edit or delete product&quot;,&quot;fullTitle&quot;:&quot;Page /products/:productId only seller and admin can edit or delete product&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:4769,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Note : Vérifie que l&#x27;admin a accès aux boutons d&#x27;édition et de suppression\n// Note : Vérifie que l&#x27;utilisateur vendeur du produit a accès aux boutons d&#x27;édition et de suppression\n// Note : Vérifie qu&#x27;un utilisateur non vendeur du produit n&#x27;a pas accès aux boutons d&#x27;édition et de suppression\ncy.visit(`http://localhost:5173/products/${_tokens.casserolesId}`, {\n  onBeforeLoad: function (window) {\n    window.localStorage.setItem(\&quot;token\&quot;, _tokens.adminToken);\n  }\n});\ncy.get(\&quot;[data-test-edit-product]\&quot;).should(\&quot;exist\&quot;);\ncy.get(\&quot;[data-test-delete-product]\&quot;).should(\&quot;exist\&quot;);\ncy.visit(`http://localhost:5173/products/${_tokens.casserolesId}`, {\n  onBeforeLoad: function (window) {\n    window.localStorage.setItem(\&quot;token\&quot;, _tokens.aliceToken);\n  }\n});\ncy.get(\&quot;[data-test-edit-product]\&quot;).should(\&quot;exist\&quot;);\ncy.get(\&quot;[data-test-delete-product]\&quot;).should(\&quot;exist\&quot;);\ncy.visit(`http://localhost:5173/products/${_tokens.casserolesId}`, {\n  onBeforeLoad: function (window) {\n    window.localStorage.setItem(\&quot;token\&quot;, _tokens.bobToken);\n  }\n});\ncy.get(\&quot;[data-test-edit-product]\&quot;).should(\&quot;not.exist\&quot;);\ncy.get(\&quot;[data-test-delete-product]\&quot;).should(\&quot;not.exist\&quot;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: Timed out retrying after 4000ms: Expected &lt;a.btn.btn-primary&gt; not to exist in the DOM, but it was continuously found.&quot;,&quot;estack&quot;:&quot;AssertionError: Timed out retrying after 4000ms: Expected &lt;a.btn.btn-primary&gt; not to exist in the DOM, but it was continuously found.\n    at Context.eval (webpack://frontend/./cypress/e2e/frontend/view-product.cy.js:171:39)&quot;,&quot;diff&quot;:null},&quot;uuid&quot;:&quot;67e54dd5-34f1-43e2-a6f7-bd39fb3813c2&quot;,&quot;parentUUID&quot;:&quot;c720fd84-04bb-4e88-b441-3b04069b5fee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;product edition button&quot;,&quot;fullTitle&quot;:&quot;Page /products/:productId product edition button&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:4476,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Note : Vérifie que bouton d&#x27;édition d&#x27;un produit cible le bon endroit\ncy.visit(`http://localhost:5173/products/${_tokens.casserolesId}`, {\n  onBeforeLoad: function (window) {\n    window.localStorage.setItem(\&quot;token\&quot;, _tokens.aliceToken);\n  }\n});\ncy.get(\&quot;[data-test-edit-product]\&quot;).should(\&quot;exist\&quot;).invoke(\&quot;attr\&quot;, \&quot;href\&quot;).should(\&quot;contain\&quot;, _tokens.casserolesId).should(\&quot;contain\&quot;, \&quot;/edit\&quot;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: Timed out retrying after 4000ms: expected &#x27;/products/TODO/edit&#x27; to include &#x27;a0f7c522-78f8-442e-a55d-642cfe566634&#x27;&quot;,&quot;estack&quot;:&quot;AssertionError: Timed out retrying after 4000ms: expected &#x27;/products/TODO/edit&#x27; to include &#x27;a0f7c522-78f8-442e-a55d-642cfe566634&#x27;\n    at Context.eval (webpack://frontend/./cypress/e2e/frontend/view-product.cy.js:187:7)&quot;,&quot;diff&quot;:null},&quot;uuid&quot;:&quot;a8614483-77df-4ed5-8bf3-5827eaeb97fb&quot;,&quot;parentUUID&quot;:&quot;c720fd84-04bb-4e88-b441-3b04069b5fee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;product deletion button&quot;,&quot;fullTitle&quot;:&quot;Page /products/:productId product deletion button&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:181,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Note : Vérifie que bouton de suppression d&#x27;un produit supprime bien le produit\ncy.visit(`http://localhost:5173/products/${_tokens.casserolesId}`, {\n  onBeforeLoad: function (window) {\n    window.localStorage.setItem(\&quot;token\&quot;, _tokens.aliceToken);\n  }\n});\n(0, _orm.getProducts)().then(({\n  products: productsBeforeDeletion\n}) =&gt; {\n  cy.get(\&quot;[data-test-delete-product]\&quot;).click();\n  (0, _orm.getProducts)().then(({\n    products: productsAfterDeletion\n  }) =&gt; {\n    expect(productsBeforeDeletion.length).to.be.greaterThan(productsAfterDeletion.length);\n  });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d692b8c3-0c83-4de9-ae18-d257f1eb2af8&quot;,&quot;parentUUID&quot;:&quot;c720fd84-04bb-4e88-b441-3b04069b5fee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;admin can delete bid&quot;,&quot;fullTitle&quot;:&quot;Page /products/:productId admin can delete bid&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:4511,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Note : Vérifie que l&#x27;admin peut supprimer n&#x27;importe quel offre\ncy.visit(`http://localhost:5173/products/${_tokens.casserolesId}`, {\n  onBeforeLoad: function (window) {\n    window.localStorage.setItem(\&quot;token\&quot;, _tokens.adminToken);\n  }\n});\ncy.get(\&quot;[data-test-delete-bid]\&quot;).should(\&quot;have.length\&quot;, 3);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: Timed out retrying after 4000ms: Too many elements found. Found &#x27;10&#x27;, expected &#x27;3&#x27;.&quot;,&quot;estack&quot;:&quot;AssertionError: Timed out retrying after 4000ms: Too many elements found. Found &#x27;10&#x27;, expected &#x27;3&#x27;.\n    at Context.eval (webpack://frontend/./cypress/e2e/frontend/view-product.cy.js:220:37)&quot;,&quot;diff&quot;:&quot;- 10\n+ 3\n&quot;},&quot;uuid&quot;:&quot;dfed2d4b-49f9-4ddd-b32d-a7a5d96dd92d&quot;,&quot;parentUUID&quot;:&quot;c720fd84-04bb-4e88-b441-3b04069b5fee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;bidder can delete bid&quot;,&quot;fullTitle&quot;:&quot;Page /products/:productId bidder can delete bid&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:4482,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Note : Vérifie qu&#x27;une offre est supprimable par l&#x27;utilisateur l&#x27;ayant fait\ncy.visit(`http://localhost:5173/products/${_tokens.casserolesId}`, {\n  onBeforeLoad: function (window) {\n    window.localStorage.setItem(\&quot;token\&quot;, _tokens.bobToken);\n  }\n});\ncy.get(\&quot;[data-test-delete-bid]\&quot;).should(\&quot;have.length\&quot;, 1);\ncy.visit(`http://localhost:5173/products/${_tokens.casserolesId}`, {\n  onBeforeLoad: function (window) {\n    window.localStorage.setItem(\&quot;token\&quot;, _tokens.charlyToken);\n  }\n});\ncy.get(\&quot;[data-test-delete-bid]\&quot;).should(\&quot;have.length\&quot;, 2);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: Timed out retrying after 4000ms: Too many elements found. Found &#x27;10&#x27;, expected &#x27;1&#x27;.&quot;,&quot;estack&quot;:&quot;AssertionError: Timed out retrying after 4000ms: Too many elements found. Found &#x27;10&#x27;, expected &#x27;1&#x27;.\n    at Context.eval (webpack://frontend/./cypress/e2e/frontend/view-product.cy.js:232:37)&quot;,&quot;diff&quot;:&quot;- 10\n+ 1\n&quot;},&quot;uuid&quot;:&quot;be64bb34-89fa-4108-81e3-d6d426138715&quot;,&quot;parentUUID&quot;:&quot;c720fd84-04bb-4e88-b441-3b04069b5fee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;not bidder cannot delete bid&quot;,&quot;fullTitle&quot;:&quot;Page /products/:productId not bidder cannot delete bid&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:4454,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Note : Vérifie qu&#x27;une offre n&#x27;est supprimable par un utilisateur ne l&#x27;ayant pas fait\ncy.visit(`http://localhost:5173/products/${_tokens.casserolesId}`, {\n  onBeforeLoad: function (window) {\n    window.localStorage.setItem(\&quot;token\&quot;, _tokens.aliceToken);\n  }\n});\ncy.get(\&quot;[data-test-delete-bid]\&quot;).should(\&quot;have.length\&quot;, 0);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: Timed out retrying after 4000ms: Too many elements found. Found &#x27;10&#x27;, expected &#x27;0&#x27;.&quot;,&quot;estack&quot;:&quot;AssertionError: Timed out retrying after 4000ms: Too many elements found. Found &#x27;10&#x27;, expected &#x27;0&#x27;.\n    at Context.eval (webpack://frontend/./cypress/e2e/frontend/view-product.cy.js:252:37)&quot;,&quot;diff&quot;:null},&quot;uuid&quot;:&quot;bd6c70dc-8b2d-45b8-8119-b73997612045&quot;,&quot;parentUUID&quot;:&quot;c720fd84-04bb-4e88-b441-3b04069b5fee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;bid deletion button&quot;,&quot;fullTitle&quot;:&quot;Page /products/:productId bid deletion button&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:4450,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Note : Vérifie que le bouton de suppression d&#x27;une offre fonctionne bien\ncy.visit(`http://localhost:5173/products/${_tokens.casserolesId}`, {\n  onBeforeLoad: function (window) {\n    window.localStorage.setItem(\&quot;token\&quot;, _tokens.bobToken);\n  }\n});\ncy.get(\&quot;[data-test-delete-bid]\&quot;).should(\&quot;have.length\&quot;, 1);\n(0, _orm.getProduct)(_tokens.casserolesId).then(({\n  product: productBeforeBidDeletion\n}) =&gt; {\n  cy.get(\&quot;[data-test-delete-bid]\&quot;).click();\n  cy.get(\&quot;[data-test-delete-bid]\&quot;).should(\&quot;have.length\&quot;, 0);\n  (0, _orm.getProduct)(_tokens.casserolesId).then(({\n    product: productAfterBidDeletion\n  }) =&gt; {\n    expect(productBeforeBidDeletion.bids.length).to.be.greaterThan(productAfterBidDeletion.bids.length);\n  });\n});&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: Timed out retrying after 4000ms: Too many elements found. Found &#x27;10&#x27;, expected &#x27;1&#x27;.&quot;,&quot;estack&quot;:&quot;AssertionError: Timed out retrying after 4000ms: Too many elements found. Found &#x27;10&#x27;, expected &#x27;1&#x27;.\n    at Context.eval (webpack://frontend/./cypress/e2e/frontend/view-product.cy.js:264:37)&quot;,&quot;diff&quot;:&quot;- 10\n+ 1\n&quot;},&quot;uuid&quot;:&quot;99c91daa-6dec-4858-8ccc-a243ade9f18a&quot;,&quot;parentUUID&quot;:&quot;c720fd84-04bb-4e88-b441-3b04069b5fee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;only seller cannot add a bid&quot;,&quot;fullTitle&quot;:&quot;Page /products/:productId only seller cannot add a bid&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:4458,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Note : Vérifie que le vendeur ne peut pas faire d&#x27;offre sur son produit\n// Note : Vérifie qu&#x27;un non-vendeur peut faire une offre sur le produit\ncy.visit(`http://localhost:5173/products/${_tokens.casserolesId}`, {\n  onBeforeLoad: function (window) {\n    window.localStorage.setItem(\&quot;token\&quot;, _tokens.aliceToken);\n  }\n});\ncy.get(\&quot;[data-test-submit-bid]\&quot;).should(\&quot;not.exist\&quot;);\ncy.visit(`http://localhost:5173/products/${_tokens.casserolesId}`, {\n  onBeforeLoad: function (window) {\n    window.localStorage.setItem(\&quot;token\&quot;, _tokens.bobToken);\n  }\n});\ncy.get(\&quot;[data-test-submit-bid]\&quot;).should(\&quot;exist\&quot;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: Timed out retrying after 4000ms: Expected &lt;button.btn.btn-primary&gt; not to exist in the DOM, but it was continuously found.&quot;,&quot;estack&quot;:&quot;AssertionError: Timed out retrying after 4000ms: Expected &lt;button.btn.btn-primary&gt; not to exist in the DOM, but it was continuously found.\n    at Context.eval (webpack://frontend/./cypress/e2e/frontend/view-product.cy.js:288:37)&quot;,&quot;diff&quot;:null},&quot;uuid&quot;:&quot;12cc09f2-0881-4253-b724-8c38bb67cebb&quot;,&quot;parentUUID&quot;:&quot;c720fd84-04bb-4e88-b441-3b04069b5fee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;require minimum bid amount&quot;,&quot;fullTitle&quot;:&quot;Page /products/:productId require minimum bid amount&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:4849,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Note : Vérifie que le formulaire d&#x27;offre est validable seulement quand l&#x27;offre est supérieur au prix de départ et à la plus haute offre\ncy.visit(`http://localhost:5173/products/${_tokens.casserolesId}`, {\n  onBeforeLoad: function (window) {\n    window.localStorage.setItem(\&quot;token\&quot;, _tokens.bobToken);\n  }\n});\ncy.get(\&quot;[data-test-bid-form-price]\&quot;).type(\&quot;{selectAll}{del}\&quot;).type(100);\ncy.get(\&quot;[data-test-submit-bid]\&quot;).should(\&quot;have.attr\&quot;, \&quot;disabled\&quot;);\ncy.get(\&quot;[data-test-bid-form-price]\&quot;).type(\&quot;{selectAll}{del}\&quot;).type(200);\ncy.get(\&quot;[data-test-submit-bid]\&quot;).should(\&quot;not.have.attr\&quot;, \&quot;disabled\&quot;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: Timed out retrying after 4000ms: expected &#x27;&lt;button.btn.btn-primary&gt;&#x27; not to have attribute &#x27;disabled&#x27;&quot;,&quot;estack&quot;:&quot;AssertionError: Timed out retrying after 4000ms: expected &#x27;&lt;button.btn.btn-primary&gt;&#x27; not to have attribute &#x27;disabled&#x27;\n    at Context.eval (webpack://frontend/./cypress/e2e/frontend/view-product.cy.js:314:37)&quot;,&quot;diff&quot;:null},&quot;uuid&quot;:&quot;171fa27c-b52f-4825-b68e-cf0b0ce7ce49&quot;,&quot;parentUUID&quot;:&quot;c720fd84-04bb-4e88-b441-3b04069b5fee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;preset minimum bid amount&quot;,&quot;fullTitle&quot;:&quot;Page /products/:productId preset minimum bid amount&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:26,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Note : Vérifie que le formulaire d&#x27;offre vaut part défaut le prix de la plus haute offre + 1€\n(0, _orm.createProduct)(\&quot;futur\&quot;, _tokens.aliceToken).then(({\n  product\n}) =&gt; {\n  (0, _orm.createBid)(product.id, product.originalPrice, _tokens.bobToken).then(({\n    bid\n  }) =&gt; {\n    cy.visit(`http://localhost:5173/products/${product.id}`, {\n      onBeforeLoad: function (window) {\n        window.localStorage.setItem(\&quot;token\&quot;, _tokens.charlyToken);\n      }\n    });\n    cy.get(\&quot;[data-test-bid-form-price]\&quot;).should(\&quot;have.value\&quot;, bid.price + 1);\n  });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;edab858c-9220-488e-9cf2-e48c62c478d5&quot;,&quot;parentUUID&quot;:&quot;c720fd84-04bb-4e88-b441-3b04069b5fee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;add a bid&quot;,&quot;fullTitle&quot;:&quot;Page /products/:productId add a bid&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:539,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Note : Vérifie que la soumission du formulaire d&#x27;offre ajoute bien une offre\ncy.visit(`http://localhost:5173/products/${_tokens.casserolesId}`, {\n  onBeforeLoad: function (window) {\n    window.localStorage.setItem(\&quot;token\&quot;, _tokens.bobToken);\n  }\n});\ncy.get(\&quot;[data-test-bid-form-price]\&quot;).type(\&quot;{selectAll}{del}\&quot;).type(200);\n(0, _orm.getProduct)(_tokens.casserolesId).then(({\n  product: productBeforeBidAddition\n}) =&gt; {\n  cy.get(\&quot;[data-test-submit-bid]\&quot;).click();\n  (0, _orm.getProduct)(_tokens.casserolesId).then(({\n    product: productAfterBidAddition\n  }) =&gt; {\n    expect(productAfterBidAddition.bids.length).greaterThan(productBeforeBidAddition.bids.length);\n    const lastBid = productAfterBidAddition.bids[productAfterBidAddition.bids.length - 1];\n    expect(lastBid.price).to.eq(200);\n  });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;32c17bc2-cf76-45a7-a27a-70e70218269e&quot;,&quot;parentUUID&quot;:&quot;c720fd84-04bb-4e88-b441-3b04069b5fee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;pending countdown&quot;,&quot;fullTitle&quot;:&quot;Page /products/:productId pending countdown&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:36,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Note : Vérifie le décompte du compte à rebours, afficher au format 9j 23h 59m 59s\n(0, _orm.createProduct)(\&quot;ten_days_later\&quot;).then(({\n  product\n}) =&gt; {\n  cy.visit(`http://localhost:5173/products/${product.id}`);\n  cy.get(\&quot;[data-test-countdown]\&quot;).should(\&quot;contain.text\&quot;, \&quot;9j 23h 59min\&quot;);\n  cy.get(\&quot;[data-test-countdown]\&quot;).then(el =&gt; {\n    const instantOne = el.text();\n    expect(instantOne).to.match(/\\ds$/);\n    // eslint-disable-next-line cypress/no-unnecessary-waiting\n    cy.wait(1000);\n    cy.get(\&quot;[data-test-countdown]\&quot;).then(el =&gt; {\n      const instantTwo = el.text();\n      expect(instantOne).to.match(/\\ds$/);\n      // eslint-disable-next-line cypress/no-unnecessary-waiting\n      cy.wait(1000);\n      expect(instantTwo).not.eq(instantOne);\n      cy.get(\&quot;[data-test-countdown]\&quot;).then(el =&gt; {\n        const instantThree = el.text();\n        expect(instantOne).to.match(/\\ds$/);\n        // eslint-disable-next-line cypress/no-unnecessary-waiting\n        cy.wait(1000);\n        expect(instantThree).not.eq(instantTwo);\n      });\n    });\n  });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1dc2825d-5ba8-4a5f-b2a7-f2d16a88476f&quot;,&quot;parentUUID&quot;:&quot;c720fd84-04bb-4e88-b441-3b04069b5fee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;loading&quot;,&quot;fullTitle&quot;:&quot;Page /products/:productId loading&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:4397,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Note : Vérifie la présence d&#x27;un spinner au chargement\ncy.intercept(\&quot;http://localhost:3000/api/products\&quot;, {\n  delay: 10000\n});\ncy.visit(`http://localhost:5173/products/${_tokens.casserolesId}`);\ncy.get(\&quot;[data-test-loading]\&quot;).should(\&quot;exist\&quot;);\ncy.get(\&quot;[data-test-error]\&quot;).should(\&quot;not.exist\&quot;);\ncy.get(\&quot;[data-test-product]\&quot;).should(\&quot;not.exist\&quot;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: Timed out retrying after 4000ms: Expected &lt;div.alert.alert-danger.mt-4&gt; not to exist in the DOM, but it was continuously found.&quot;,&quot;estack&quot;:&quot;AssertionError: Timed out retrying after 4000ms: Expected &lt;div.alert.alert-danger.mt-4&gt; not to exist in the DOM, but it was continuously found.\n    at Context.eval (webpack://frontend/./cypress/e2e/frontend/view-product.cy.js:408:32)&quot;,&quot;diff&quot;:null},&quot;uuid&quot;:&quot;3482a5cc-e203-4983-8dff-785c1ff8d39f&quot;,&quot;parentUUID&quot;:&quot;c720fd84-04bb-4e88-b441-3b04069b5fee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;error message&quot;,&quot;fullTitle&quot;:&quot;Page /products/:productId error message&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:4455,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Note : Vérifie la présence d&#x27;une erreur en cas d&#x27;échec de chargement\ncy.intercept(`http://localhost:3000/api/products/${_tokens.casserolesId}`, {\n  status: 500,\n  response: {}\n});\ncy.visit(`http://localhost:5173/products/${_tokens.casserolesId}`);\ncy.get(\&quot;[data-test-loading]\&quot;).should(\&quot;not.exist\&quot;);\ncy.get(\&quot;[data-test-error]\&quot;).should(\&quot;exist\&quot;);\ncy.get(\&quot;[data-test-product]\&quot;).should(\&quot;not.exist\&quot;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: Timed out retrying after 4000ms: Expected &lt;div.text-center.mt-4&gt; not to exist in the DOM, but it was continuously found.&quot;,&quot;estack&quot;:&quot;AssertionError: Timed out retrying after 4000ms: Expected &lt;div.text-center.mt-4&gt; not to exist in the DOM, but it was continuously found.\n    at Context.eval (webpack://frontend/./cypress/e2e/frontend/view-product.cy.js:422:34)&quot;,&quot;diff&quot;:null},&quot;uuid&quot;:&quot;57e29359-0463-4681-9d57-63e8bf6d7a1c&quot;,&quot;parentUUID&quot;:&quot;c720fd84-04bb-4e88-b441-3b04069b5fee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;ready&quot;,&quot;fullTitle&quot;:&quot;Page /products/:productId ready&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:4561,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Note : Vérifie la présence du contenu quand tout s&#x27;est bien chargé\ncy.intercept(`http://localhost:3000/api/products/${_tokens.casserolesId}`);\ncy.visit(`http://localhost:5173/products/${_tokens.casserolesId}`);\ncy.get(\&quot;[data-test-loading]\&quot;).should(\&quot;not.exist\&quot;);\ncy.get(\&quot;[data-test-error]\&quot;).should(\&quot;not.exist\&quot;);\ncy.get(\&quot;[data-test-product]\&quot;).should(\&quot;exist\&quot;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: Timed out retrying after 4000ms: Expected &lt;div.text-center.mt-4&gt; not to exist in the DOM, but it was continuously found.&quot;,&quot;estack&quot;:&quot;AssertionError: Timed out retrying after 4000ms: Expected &lt;div.text-center.mt-4&gt; not to exist in the DOM, but it was continuously found.\n    at Context.eval (webpack://frontend/./cypress/e2e/frontend/view-product.cy.js:434:34)&quot;,&quot;diff&quot;:null},&quot;uuid&quot;:&quot;336b3481-194b-438a-a7ae-d920463d2da1&quot;,&quot;parentUUID&quot;:&quot;c720fd84-04bb-4e88-b441-3b04069b5fee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6e3e6cf6-72ce-4390-bed5-ecf5d15a0afc&quot;,&quot;f47369ac-ad21-488b-8437-6d979254e2cf&quot;,&quot;d5b56a76-21b4-4a05-9565-f9e42e380061&quot;,&quot;6f8870ac-9921-4d3f-bae0-106dbaa9f1c2&quot;,&quot;f891b677-fd4e-4b95-8174-6dd6ef88d975&quot;,&quot;d692b8c3-0c83-4de9-ae18-d257f1eb2af8&quot;,&quot;edab858c-9220-488e-9cf2-e48c62c478d5&quot;,&quot;32c17bc2-cf76-45a7-a27a-70e70218269e&quot;,&quot;1dc2825d-5ba8-4a5f-b2a7-f2d16a88476f&quot;],&quot;failures&quot;:[&quot;bf7b25c4-c996-42c4-b0a1-e896560808fe&quot;,&quot;67e54dd5-34f1-43e2-a6f7-bd39fb3813c2&quot;,&quot;a8614483-77df-4ed5-8bf3-5827eaeb97fb&quot;,&quot;dfed2d4b-49f9-4ddd-b32d-a7a5d96dd92d&quot;,&quot;be64bb34-89fa-4108-81e3-d6d426138715&quot;,&quot;bd6c70dc-8b2d-45b8-8119-b73997612045&quot;,&quot;99c91daa-6dec-4858-8ccc-a243ade9f18a&quot;,&quot;12cc09f2-0881-4253-b724-8c38bb67cebb&quot;,&quot;171fa27c-b52f-4825-b68e-cf0b0ce7ce49&quot;,&quot;3482a5cc-e203-4983-8dff-785c1ff8d39f&quot;,&quot;57e29359-0463-4681-9d57-63e8bf6d7a1c&quot;,&quot;336b3481-194b-438a-a7ae-d920463d2da1&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:55362,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;bc7e33b2-3b0c-44f2-93c8-ce865e459f34&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;cypress/e2e/backend/endpoints.cy.js&quot;,&quot;file&quot;:&quot;cypress/e2e/backend/endpoints.cy.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;661abb2e-df94-4ad2-9482-ea65bb8b3dff&quot;,&quot;title&quot;:&quot;GET /api/products&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns 200 - success&quot;,&quot;fullTitle&quot;:&quot;GET /api/products returns 200 - success&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:404,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;cy.request(endpoint).then(response =&gt; {\n  expect(response.status).to.be.eq(200);\n  expect(response.headers[\&quot;content-type\&quot;]).to.contains(\&quot;application/json\&quot;);\n  for (let product of response.body) {\n    expect(product.id).to.be.a(\&quot;string\&quot;);\n    expect(product.id).to.be.match(_pattern.UUIDv4);\n    expect(product.name).to.be.a(\&quot;string\&quot;);\n    expect(product.description).to.be.a(\&quot;string\&quot;);\n    expect(product.category).to.be.a(\&quot;string\&quot;);\n    expect(product.originalPrice).to.be.a(\&quot;number\&quot;);\n    expect(product.pictureUrl).to.be.a(\&quot;string\&quot;);\n    expect(product.endDate).to.be.a(\&quot;string\&quot;);\n    expect(product.endDate).to.match(_pattern.IOS8601);\n    expect(product.seller.id).to.be.a(\&quot;string\&quot;);\n    expect(product.seller.username).to.be.a(\&quot;string\&quot;);\n    for (let bid of product.bids) {\n      expect(bid.id).to.be.a(\&quot;string\&quot;);\n      expect(bid.id).to.match(_pattern.UUIDv4);\n      expect(bid.price).to.be.a(\&quot;number\&quot;);\n      expect(bid.date).to.be.a(\&quot;string\&quot;);\n      expect(bid.date).to.match(_pattern.IOS8601);\n    }\n    const fixtureProduct = response.body.find(item =&gt; {\n      return item.id === \&quot;a0f7c522-78f8-442e-a55d-642cfe566634\&quot;;\n    });\n    expect(fixtureProduct.id).to.be.eq(\&quot;a0f7c522-78f8-442e-a55d-642cfe566634\&quot;);\n    expect(fixtureProduct.name).to.be.eq(\&quot;Lot de casseroles\&quot;);\n    expect(fixtureProduct.description).to.be.eq(\&quot;Ensemble de casseroles de qualité supérieure pour répondre à tous vos besoins culinaires.\&quot;);\n    expect(fixtureProduct.category).to.be.eq(\&quot;Cuisine\&quot;);\n    expect(fixtureProduct.originalPrice).to.be.eq(40);\n    expect(fixtureProduct.pictureUrl).to.be.eq(\&quot;https://image.noelshack.com/fichiers/2023/12/4/1679526253-65535-51812547429-fe1cc0d832-c-512-512-nofilter.jpg\&quot;);\n    expect(fixtureProduct.seller.id).to.be.eq(_tokens.aliceId);\n    expect(fixtureProduct.seller.username).to.be.eq(\&quot;alice\&quot;);\n    expect(fixtureProduct.bids.some(bid =&gt; bid.price === 65)).to.be.true;\n  }\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fe82a9b0-4410-44af-afbb-516f07d505a0&quot;,&quot;parentUUID&quot;:&quot;661abb2e-df94-4ad2-9482-ea65bb8b3dff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fe82a9b0-4410-44af-afbb-516f07d505a0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:404,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;24c6bc01-7a3d-4085-9b32-892c832a491b&quot;,&quot;title&quot;:&quot;POST /api/products&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns 401 - not authorized&quot;,&quot;fullTitle&quot;:&quot;POST /api/products returns 401 - not authorized&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:55,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;cy.request({\n  method: \&quot;POST\&quot;,\n  url: \&quot;http://localhost:3000/api/products\&quot;,\n  headers: {\n    Authorization: `Bearer BAD_TOKEN`\n  },\n  body: {\n    name: \&quot;New Product\&quot;,\n    description: \&quot;This is a new product\&quot;,\n    category: \&quot;Electronics\&quot;,\n    originalPrice: 99,\n    pictureUrl: \&quot;https://example.com/product.jpg\&quot;,\n    endDate: \&quot;2023-04-01T00:00:00.000Z\&quot;\n  },\n  failOnStatusCode: false\n}).its(\&quot;status\&quot;).should(\&quot;equal\&quot;, 401);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;98c653ea-a5cb-4f9f-9eaa-e7667ad88273&quot;,&quot;parentUUID&quot;:&quot;24c6bc01-7a3d-4085-9b32-892c832a491b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns 201 - created&quot;,&quot;fullTitle&quot;:&quot;POST /api/products returns 201 - created&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:28,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Create a new product\ncy.request({\n  method: \&quot;POST\&quot;,\n  url: \&quot;http://localhost:3000/api/products\&quot;,\n  headers: {\n    Authorization: `Bearer ${_tokens.aliceToken}`\n  },\n  body: {\n    name: \&quot;New Product\&quot;,\n    description: \&quot;This is a new product\&quot;,\n    category: \&quot;Electronics\&quot;,\n    originalPrice: 99,\n    pictureUrl: \&quot;https://example.com/product.jpg\&quot;,\n    endDate: \&quot;2023-04-01T00:00:00.000Z\&quot;\n  }\n}).then(response =&gt; {\n  // Assert that the response is as expected\n  expect(response.status).to.eq(201);\n  expect(response.body.id).to.be.match(_pattern.UUIDv4);\n  expect(response.body.name).to.eq(\&quot;New Product\&quot;);\n  expect(response.body.description).to.eq(\&quot;This is a new product\&quot;);\n  expect(response.body.category).to.eq(\&quot;Electronics\&quot;);\n  expect(response.body.originalPrice).to.eq(99);\n  expect(response.body.pictureUrl).to.eq(\&quot;https://example.com/product.jpg\&quot;);\n  expect(response.body.endDate).to.eq(\&quot;2023-04-01T00:00:00.000Z\&quot;);\n  expect(response.body.sellerId).to.eq(_tokens.aliceId);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;68465c96-e2f0-4c82-9354-ebdc7c1cb940&quot;,&quot;parentUUID&quot;:&quot;24c6bc01-7a3d-4085-9b32-892c832a491b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns 400 - missing or invalid fields&quot;,&quot;fullTitle&quot;:&quot;POST /api/products returns 400 - missing or invalid fields&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:42,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Create a new product\ncy.request({\n  method: \&quot;POST\&quot;,\n  url: \&quot;http://localhost:3000/api/products\&quot;,\n  headers: {\n    Authorization: `Bearer ${_tokens.aliceToken}`\n  },\n  body: {\n    // Missing name: \&quot;Machine à écrire\&quot;,\n    description: \&quot;Machine à écrire vintage en parfait état de fonctionnement pour une expérience d&#x27;écriture unique et authentique.\&quot;,\n    pictureUrl: \&quot;https://picsum.photos/id/403/512/512\&quot;,\n    category: \&quot;High-Tech\&quot;,\n    originalPrice: 200,\n    endDate: \&quot;2026-01-01T09:00:00Z\&quot;\n  },\n  failOnStatusCode: false\n}).then(req =&gt; {\n  expect(req.status).to.be.eq(400);\n  expect(req.body.error).to.be.eq(\&quot;Invalid or missing fields\&quot;);\n  expect(req.body.details).to.exist;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7951e2f5-b41d-4b62-9844-0cb2089dedc9&quot;,&quot;parentUUID&quot;:&quot;24c6bc01-7a3d-4085-9b32-892c832a491b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check mutation - object created in database&quot;,&quot;fullTitle&quot;:&quot;POST /api/products check mutation - object created in database&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:47,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Create a new product\n(0, _orm.getProducts)().then(({\n  products: productsBeforeCreation\n}) =&gt; {\n  (0, _orm.createProduct)().then(({\n    product\n  }) =&gt; {\n    (0, _orm.getProducts)().then(({\n      products: productsAfterCreation\n    }) =&gt; {\n      const newProducts = productsAfterCreation.filter(product =&gt; productsBeforeCreation.every(existingProduct =&gt; existingProduct.id !== product.id));\n      expect(newProducts.length).to.be.eq(1);\n      const newProduct = newProducts[0];\n      expect(newProduct.id).to.be.match(_pattern.UUIDv4);\n      expect(newProduct.name).to.eq(name);\n      expect(newProduct.description).to.eq(product.description);\n      expect(newProduct.category).to.eq(product.category);\n      expect(newProduct.originalPrice).to.eq(product.originalPrice);\n      expect(newProduct.pictureUrl).to.eq(product.pictureUrl);\n      expect(newProduct.endDate).to.eq(product.endDate);\n      expect(newProduct.seller.id).to.eq(_tokens.aliceId);\n      expect(newProduct.seller.username).to.eq(\&quot;alice\&quot;);\n    });\n  });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cf7ec7fe-f7b3-4720-8435-6cd5e559b344&quot;,&quot;parentUUID&quot;:&quot;24c6bc01-7a3d-4085-9b32-892c832a491b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;98c653ea-a5cb-4f9f-9eaa-e7667ad88273&quot;,&quot;68465c96-e2f0-4c82-9354-ebdc7c1cb940&quot;,&quot;7951e2f5-b41d-4b62-9844-0cb2089dedc9&quot;,&quot;cf7ec7fe-f7b3-4720-8435-6cd5e559b344&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:172,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0fad970b-eab9-43cd-a3a0-190754c6e918&quot;,&quot;title&quot;:&quot;GET /api/products/:productId&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns 404 - not found&quot;,&quot;fullTitle&quot;:&quot;GET /api/products/:productId returns 404 - not found&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:27,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;cy.request({\n  url: \&quot;http://localhost:3000/api/products/not-existing-id\&quot;,\n  failOnStatusCode: false\n}).its(\&quot;status\&quot;).should(\&quot;equal\&quot;, 404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3f488b2b-22e4-4540-a197-2a4353485918&quot;,&quot;parentUUID&quot;:&quot;0fad970b-eab9-43cd-a3a0-190754c6e918&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns 200 - success&quot;,&quot;fullTitle&quot;:&quot;GET /api/products/:productId returns 200 - success&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:32,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;cy.request(endpoint).then(response =&gt; {\n  expect(response.status).to.be.eq(200);\n  expect(response.headers[\&quot;content-type\&quot;]).to.includes(\&quot;application/json\&quot;);\n  const product = response.body;\n  expect(product.id).to.be.eq(\&quot;a0f7c522-78f8-442e-a55d-642cfe566634\&quot;);\n  expect(product.name).to.be.eq(\&quot;Lot de casseroles\&quot;);\n  expect(product.description).to.be.eq(\&quot;Ensemble de casseroles de qualité supérieure pour répondre à tous vos besoins culinaires.\&quot;);\n  expect(product.category).to.be.eq(\&quot;Cuisine\&quot;);\n  expect(product.originalPrice).to.be.eq(40);\n  expect(product.pictureUrl).to.be.eq(\&quot;https://image.noelshack.com/fichiers/2023/12/4/1679526253-65535-51812547429-fe1cc0d832-c-512-512-nofilter.jpg\&quot;);\n  expect(product.seller.id).to.be.eq(_tokens.aliceId);\n  expect(product.seller.username).to.be.eq(\&quot;alice\&quot;);\n  const bid = response.body.bids.find(bid =&gt; bid.price === 65);\n  expect(bid.id).to.be.eq(\&quot;8ccc6e79-f3c9-43e9-b47e-5be7b84d8de7\&quot;);\n  expect(bid.bidder.id).to.be.eq(_tokens.charlyId);\n  expect(bid.bidder.username).to.be.eq(\&quot;charly\&quot;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5930b34f-580f-4a51-a19b-284f5b732fea&quot;,&quot;parentUUID&quot;:&quot;0fad970b-eab9-43cd-a3a0-190754c6e918&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3f488b2b-22e4-4540-a197-2a4353485918&quot;,&quot;5930b34f-580f-4a51-a19b-284f5b732fea&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:59,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3043d484-000b-4760-a6b1-8c1106fc11cc&quot;,&quot;title&quot;:&quot;PUT /api/products/:productId&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns 401 - not authorized&quot;,&quot;fullTitle&quot;:&quot;PUT /api/products/:productId returns 401 - not authorized&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:35,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;cy.request({\n  method: \&quot;PUT\&quot;,\n  url: endpoint,\n  headers: {\n    Authorization: `Bearer BAD_TOKEN`\n  },\n  body: {\n    name: \&quot;Machine à écrire\&quot;,\n    description: \&quot;Machine à écrire vintage en parfait état de fonctionnement pour une expérience d&#x27;écriture unique et authentique.\&quot;,\n    pictureUrl: \&quot;https://picsum.photos/id/403/512/512\&quot;,\n    category: \&quot;High-Tech\&quot;,\n    originalPrice: 200,\n    endDate: \&quot;2026-01-01T09:00:00Z\&quot;\n  },\n  failOnStatusCode: false\n}).its(\&quot;status\&quot;).should(\&quot;equal\&quot;, 401);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d6955de3-8d9b-495f-a708-655b5f7b270f&quot;,&quot;parentUUID&quot;:&quot;3043d484-000b-4760-a6b1-8c1106fc11cc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns 200 - success, when owner edit&quot;,&quot;fullTitle&quot;:&quot;PUT /api/products/:productId returns 200 - success, when owner edit&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:33,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;cy.request({\n  url: endpoint,\n  method: \&quot;PUT\&quot;,\n  headers: {\n    Authorization: `Bearer ${_tokens.aliceToken}`\n  },\n  body: {\n    name: \&quot;Machine à écrire\&quot;,\n    description: \&quot;Machine à écrire vintage en parfait état de fonctionnement pour une expérience d&#x27;écriture unique et authentique.\&quot;,\n    pictureUrl: \&quot;https://picsum.photos/id/403/512/512\&quot;,\n    category: \&quot;High-Tech\&quot;,\n    originalPrice: 200,\n    endDate: \&quot;2026-01-01T09:00:00Z\&quot;\n  }\n}).its(\&quot;status\&quot;).should(\&quot;equal\&quot;, 200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ff9fcd85-3a4f-45a6-83fe-515d6d3e91c6&quot;,&quot;parentUUID&quot;:&quot;3043d484-000b-4760-a6b1-8c1106fc11cc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns 403 - forbidden, when non owner edit&quot;,&quot;fullTitle&quot;:&quot;PUT /api/products/:productId returns 403 - forbidden, when non owner edit&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:30,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;cy.request({\n  url: endpoint,\n  method: \&quot;PUT\&quot;,\n  headers: {\n    Authorization: `Bearer ${_tokens.bobToken}`\n  },\n  body: {\n    name: \&quot;Machine à écrire\&quot;,\n    description: \&quot;Machine à écrire vintage en parfait état de fonctionnement pour une expérience d&#x27;écriture unique et authentique.\&quot;,\n    pictureUrl: \&quot;https://picsum.photos/id/403/512/512\&quot;,\n    category: \&quot;High-Tech\&quot;,\n    originalPrice: 200,\n    endDate: \&quot;2026-01-01T09:00:00Z\&quot;\n  },\n  failOnStatusCode: false\n}).its(\&quot;status\&quot;).should(\&quot;equal\&quot;, 403);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c70e7f90-deb3-44b9-aa68-24813e0375ca&quot;,&quot;parentUUID&quot;:&quot;3043d484-000b-4760-a6b1-8c1106fc11cc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns 200 - success, when admin edit&quot;,&quot;fullTitle&quot;:&quot;PUT /api/products/:productId returns 200 - success, when admin edit&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:35,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;cy.request({\n  url: endpoint,\n  method: \&quot;PUT\&quot;,\n  headers: {\n    Authorization: `Bearer ${_tokens.adminToken}`\n  },\n  body: {\n    name: \&quot;Machine à écrire\&quot;,\n    description: \&quot;Machine à écrire vintage en parfait état de fonctionnement pour une expérience d&#x27;écriture unique et authentique.\&quot;,\n    pictureUrl: \&quot;https://picsum.photos/id/403/512/512\&quot;,\n    category: \&quot;High-Tech\&quot;,\n    originalPrice: 200,\n    endDate: \&quot;2026-01-01T09:00:00Z\&quot;\n  }\n}).its(\&quot;status\&quot;).should(\&quot;equal\&quot;, 200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cd2c06d3-4e26-4661-bb97-c438dae5b6ea&quot;,&quot;parentUUID&quot;:&quot;3043d484-000b-4760-a6b1-8c1106fc11cc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns 404 - not found&quot;,&quot;fullTitle&quot;:&quot;PUT /api/products/:productId returns 404 - not found&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:33,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;cy.request({\n  url: \&quot;http://localhost:3000/api/products/not-existing-id\&quot;,\n  method: \&quot;PUT\&quot;,\n  headers: {\n    Authorization: `Bearer ${_tokens.aliceToken}`\n  },\n  body: {\n    name: \&quot;Machine à écrire\&quot;,\n    description: \&quot;Machine à écrire vintage en parfait état de fonctionnement pour une expérience d&#x27;écriture unique et authentique.\&quot;,\n    pictureUrl: \&quot;https://picsum.photos/id/403/512/512\&quot;,\n    category: \&quot;High-Tech\&quot;,\n    originalPrice: 200,\n    endDate: \&quot;2026-01-01T09:00:00Z\&quot;\n  },\n  failOnStatusCode: false\n}).its(\&quot;status\&quot;).should(\&quot;equal\&quot;, 404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;df734704-32ba-44ff-9319-da46cc9cd3bf&quot;,&quot;parentUUID&quot;:&quot;3043d484-000b-4760-a6b1-8c1106fc11cc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check mutation - object updated in database&quot;,&quot;fullTitle&quot;:&quot;PUT /api/products/:productId check mutation - object updated in database&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:30,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const newProductData = (0, _orm.buildProduct)();\ncy.request({\n  url: endpoint,\n  method: \&quot;PUT\&quot;,\n  headers: {\n    Authorization: `Bearer ${_tokens.aliceToken}`\n  },\n  body: {\n    name: newProductData.name,\n    description: newProductData.description,\n    pictureUrl: newProductData.pictureUrl,\n    category: newProductData.category,\n    originalPrice: newProductData.originalPrice,\n    endDate: newProductData.endDate.toISOString()\n  }\n}).then(() =&gt; {\n  cy.request(endpoint).then(response =&gt; {\n    const product = response.body;\n    expect(response.status).to.be.eq(200);\n    expect(product.id).to.be.eq(\&quot;a0f7c522-78f8-442e-a55d-642cfe566634\&quot;);\n    expect(product.name).to.be.eq(newProductData.name);\n    expect(product.description).to.be.eq(newProductData.description);\n    expect(product.category).to.be.eq(newProductData.category);\n    expect(product.originalPrice).to.be.eq(newProductData.originalPrice);\n    expect(product.pictureUrl).to.be.eq(newProductData.pictureUrl);\n    expect(product.endDate).to.be.eq(newProductData.endDate.toISOString());\n    expect(product.seller.id).to.be.eq(_tokens.aliceId);\n    expect(product.seller.username).to.be.eq(\&quot;alice\&quot;);\n  });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;da176abf-1168-481e-bc81-54fd1a921623&quot;,&quot;parentUUID&quot;:&quot;3043d484-000b-4760-a6b1-8c1106fc11cc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d6955de3-8d9b-495f-a708-655b5f7b270f&quot;,&quot;ff9fcd85-3a4f-45a6-83fe-515d6d3e91c6&quot;,&quot;c70e7f90-deb3-44b9-aa68-24813e0375ca&quot;,&quot;cd2c06d3-4e26-4661-bb97-c438dae5b6ea&quot;,&quot;df734704-32ba-44ff-9319-da46cc9cd3bf&quot;,&quot;da176abf-1168-481e-bc81-54fd1a921623&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:196,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;39114958-fdb2-4909-88f2-c771d9985c06&quot;,&quot;title&quot;:&quot;DELETE /api/products/:productId&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns 401 - not authorized&quot;,&quot;fullTitle&quot;:&quot;DELETE /api/products/:productId returns 401 - not authorized&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:23,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;cy.request({\n  method: \&quot;DELETE\&quot;,\n  url: endpoint,\n  headers: {\n    Authorization: `Bearer BAD_TOKEN`\n  },\n  failOnStatusCode: false\n}).its(\&quot;status\&quot;).should(\&quot;equal\&quot;, 401);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1134660a-5ecf-4852-99f5-5e59d5582fca&quot;,&quot;parentUUID&quot;:&quot;39114958-fdb2-4909-88f2-c771d9985c06&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns 204 - success, when owner edit&quot;,&quot;fullTitle&quot;:&quot;DELETE /api/products/:productId returns 204 - success, when owner edit&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:33,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;cy.request({\n  url: endpoint,\n  method: \&quot;DELETE\&quot;,\n  headers: {\n    Authorization: `Bearer ${_tokens.aliceToken}`\n  }\n}).its(\&quot;status\&quot;).should(\&quot;equal\&quot;, 204);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7ad451be-0ecd-4319-bb52-85a5bdedc25c&quot;,&quot;parentUUID&quot;:&quot;39114958-fdb2-4909-88f2-c771d9985c06&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns 403 - forbidden, when non owner edit&quot;,&quot;fullTitle&quot;:&quot;DELETE /api/products/:productId returns 403 - forbidden, when non owner edit&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:30,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;cy.request({\n  url: endpoint,\n  method: \&quot;DELETE\&quot;,\n  headers: {\n    Authorization: `Bearer ${_tokens.bobToken}`\n  },\n  failOnStatusCode: false\n}).its(\&quot;status\&quot;).should(\&quot;equal\&quot;, 403);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f4502b13-ccfb-4ac5-a6e2-79c3a95b4789&quot;,&quot;parentUUID&quot;:&quot;39114958-fdb2-4909-88f2-c771d9985c06&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns 204 - success, when admin edit&quot;,&quot;fullTitle&quot;:&quot;DELETE /api/products/:productId returns 204 - success, when admin edit&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:31,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;cy.request({\n  url: endpoint,\n  method: \&quot;DELETE\&quot;,\n  headers: {\n    Authorization: `Bearer ${_tokens.adminToken}`\n  }\n}).its(\&quot;status\&quot;).should(\&quot;equal\&quot;, 204);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;47f38b55-fd6f-4a1a-b458-45f663fb711b&quot;,&quot;parentUUID&quot;:&quot;39114958-fdb2-4909-88f2-c771d9985c06&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns 404 - not found&quot;,&quot;fullTitle&quot;:&quot;DELETE /api/products/:productId returns 404 - not found&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:32,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;cy.request({\n  url: \&quot;http://localhost:3000/api/products/not-existing-id\&quot;,\n  method: \&quot;DELETE\&quot;,\n  headers: {\n    Authorization: `Bearer ${_tokens.aliceToken}`\n  },\n  failOnStatusCode: false\n}).its(\&quot;status\&quot;).should(\&quot;equal\&quot;, 404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ce5a6601-0e1f-4cab-b194-e18a3d5a3778&quot;,&quot;parentUUID&quot;:&quot;39114958-fdb2-4909-88f2-c771d9985c06&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check mutation - object deleted in database&quot;,&quot;fullTitle&quot;:&quot;DELETE /api/products/:productId check mutation - object deleted in database&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:40,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;cy.request({\n  url: endpoint,\n  method: \&quot;GET\&quot;,\n  headers: {\n    Authorization: `Bearer ${_tokens.aliceToken}`\n  }\n}).then(response =&gt; {\n  expect(response.status).to.be.eq(200);\n  cy.request({\n    url: endpoint,\n    method: \&quot;DELETE\&quot;,\n    headers: {\n      Authorization: `Bearer ${_tokens.aliceToken}`\n    }\n  }).then(response =&gt; {\n    expect(response.status).to.be.eq(204);\n    cy.request({\n      url: endpoint,\n      method: \&quot;GET\&quot;,\n      headers: {\n        Authorization: `Bearer ${_tokens.aliceToken}`\n      },\n      failOnStatusCode: false\n    }).then(response =&gt; {\n      expect(response.status).to.be.eq(404);\n    });\n  });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;752b75fd-2ffb-43d5-9cff-5804d52ec00f&quot;,&quot;parentUUID&quot;:&quot;39114958-fdb2-4909-88f2-c771d9985c06&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1134660a-5ecf-4852-99f5-5e59d5582fca&quot;,&quot;7ad451be-0ecd-4319-bb52-85a5bdedc25c&quot;,&quot;f4502b13-ccfb-4ac5-a6e2-79c3a95b4789&quot;,&quot;47f38b55-fd6f-4a1a-b458-45f663fb711b&quot;,&quot;ce5a6601-0e1f-4cab-b194-e18a3d5a3778&quot;,&quot;752b75fd-2ffb-43d5-9cff-5804d52ec00f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:189,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d2fcb161-ecfd-4e8c-ba1f-84964f84bb71&quot;,&quot;title&quot;:&quot;POST /api/products/:productId/bids&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns 401 - not authorized&quot;,&quot;fullTitle&quot;:&quot;POST /api/products/:productId/bids returns 401 - not authorized&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:30,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;cy.request({\n  method: \&quot;POST\&quot;,\n  url: \&quot;http://localhost:3000/api/products/a0f7c522-78f8-442e-a55d-642cfe566634/bids\&quot;,\n  headers: {\n    Authorization: `Bearer BAD_TOKEN`\n  },\n  body: {\n    name: \&quot;New Product\&quot;,\n    description: \&quot;This is a new product\&quot;,\n    category: \&quot;Electronics\&quot;,\n    originalPrice: 99,\n    pictureUrl: \&quot;https://example.com/product.jpg\&quot;,\n    endDate: \&quot;2023-04-01T00:00:00.000Z\&quot;\n  },\n  failOnStatusCode: false\n}).its(\&quot;status\&quot;).should(\&quot;equal\&quot;, 401);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;813146b9-c1f7-4be1-8680-7b74fe218c8e&quot;,&quot;parentUUID&quot;:&quot;d2fcb161-ecfd-4e8c-ba1f-84964f84bb71&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns 201 - created&quot;,&quot;fullTitle&quot;:&quot;POST /api/products/:productId/bids returns 201 - created&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:33,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Create a new product\ncy.request({\n  method: \&quot;POST\&quot;,\n  url: \&quot;http://localhost:3000/api/products/a0f7c522-78f8-442e-a55d-642cfe566634/bids\&quot;,\n  headers: {\n    Authorization: `Bearer ${_tokens.aliceToken}`\n  },\n  body: {\n    price: 42\n  }\n}).then(response =&gt; {\n  // Assert that the response is as expected\n  expect(response.status).to.eq(201);\n  expect(response.body.id).to.be.match(_pattern.UUIDv4);\n  expect(response.body.productId).to.be.match(_pattern.UUIDv4);\n  expect(response.body.price).to.be.a(\&quot;number\&quot;);\n  expect(response.body.date).to.match(_pattern.IOS8601);\n  expect(response.body.bidderId).to.match(_pattern.UUIDv4);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bedf2bb2-702b-45fe-9801-437f3c30a320&quot;,&quot;parentUUID&quot;:&quot;d2fcb161-ecfd-4e8c-ba1f-84964f84bb71&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns 400 - missing or invalid fields&quot;,&quot;fullTitle&quot;:&quot;POST /api/products/:productId/bids returns 400 - missing or invalid fields&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:26,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// Create a new product\ncy.request({\n  method: \&quot;POST\&quot;,\n  url: \&quot;http://localhost:3000/api/products/a0f7c522-78f8-442e-a55d-642cfe566634/bids\&quot;,\n  headers: {\n    Authorization: `Bearer ${_tokens.aliceToken}`\n  },\n  body: {\n    // price: 42, missing\n  },\n  failOnStatusCode: false\n}).then(req =&gt; {\n  expect(req.status).to.be.eq(400);\n  expect(req.body.error).to.be.eq(\&quot;Invalid or missing fields\&quot;);\n  expect(req.body.details).to.exist;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3eb2cf50-3133-47c4-be6c-c7bfcc680ab7&quot;,&quot;parentUUID&quot;:&quot;d2fcb161-ecfd-4e8c-ba1f-84964f84bb71&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check mutation - object created in database&quot;,&quot;fullTitle&quot;:&quot;POST /api/products/:productId/bids check mutation - object created in database&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:34,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;cy.request({\n  method: \&quot;POST\&quot;,\n  url: \&quot;http://localhost:3000/api/products/a0f7c522-78f8-442e-a55d-642cfe566634/bids\&quot;,\n  headers: {\n    Authorization: `Bearer ${_tokens.aliceToken}`\n  },\n  body: {\n    price: 42\n  }\n}).then(response =&gt; {\n  expect(response.status).to.be.eq(201);\n  const newBid = response.body;\n  cy.request(\&quot;http://localhost:3000/api/products/a0f7c522-78f8-442e-a55d-642cfe566634\&quot;).then(response =&gt; {\n    const product = response.body;\n    expect(product.bids.some(bid =&gt; bid.id === newBid.id)).to.be.true;\n  });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1c08ef03-3237-4895-9fdb-db8c378e0974&quot;,&quot;parentUUID&quot;:&quot;d2fcb161-ecfd-4e8c-ba1f-84964f84bb71&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;813146b9-c1f7-4be1-8680-7b74fe218c8e&quot;,&quot;bedf2bb2-702b-45fe-9801-437f3c30a320&quot;,&quot;3eb2cf50-3133-47c4-be6c-c7bfcc680ab7&quot;,&quot;1c08ef03-3237-4895-9fdb-db8c378e0974&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:123,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2600997b-0f53-40ea-a6e1-db11f8d0e139&quot;,&quot;title&quot;:&quot;DELETE /bids/:bidId&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns 401 - not authorized&quot;,&quot;fullTitle&quot;:&quot;DELETE /bids/:bidId returns 401 - not authorized&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:33,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;cy.request({\n  method: \&quot;DELETE\&quot;,\n  url: endpoint,\n  headers: {\n    Authorization: `Bearer BAD_TOKEN`\n  },\n  failOnStatusCode: false\n}).its(\&quot;status\&quot;).should(\&quot;equal\&quot;, 401);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b4205623-8cb6-41ff-9b50-efc7363f5970&quot;,&quot;parentUUID&quot;:&quot;2600997b-0f53-40ea-a6e1-db11f8d0e139&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns 204 - success, when owner edit&quot;,&quot;fullTitle&quot;:&quot;DELETE /bids/:bidId returns 204 - success, when owner edit&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:24,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;cy.request({\n  url: endpoint,\n  method: \&quot;DELETE\&quot;,\n  headers: {\n    Authorization: `Bearer ${_tokens.charlyToken}`\n  }\n}).its(\&quot;status\&quot;).should(\&quot;equal\&quot;, 204);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ec3bb8ea-a644-40ff-b097-78a039a88d77&quot;,&quot;parentUUID&quot;:&quot;2600997b-0f53-40ea-a6e1-db11f8d0e139&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns 403 - forbidden, when non owner edit&quot;,&quot;fullTitle&quot;:&quot;DELETE /bids/:bidId returns 403 - forbidden, when non owner edit&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:23,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;cy.request({\n  url: endpoint,\n  method: \&quot;DELETE\&quot;,\n  headers: {\n    Authorization: `Bearer ${_tokens.bobToken}`\n  },\n  failOnStatusCode: false\n}).its(\&quot;status\&quot;).should(\&quot;equal\&quot;, 403);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;92381970-17c4-4d97-b89c-2d1aed1613ee&quot;,&quot;parentUUID&quot;:&quot;2600997b-0f53-40ea-a6e1-db11f8d0e139&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns 204 - success, when admin edit&quot;,&quot;fullTitle&quot;:&quot;DELETE /bids/:bidId returns 204 - success, when admin edit&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:30,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;cy.request({\n  url: endpoint,\n  method: \&quot;DELETE\&quot;,\n  headers: {\n    Authorization: `Bearer ${_tokens.adminToken}`\n  }\n}).its(\&quot;status\&quot;).should(\&quot;equal\&quot;, 204);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c3af65c2-af2a-479c-bd00-67c6be6e25ef&quot;,&quot;parentUUID&quot;:&quot;2600997b-0f53-40ea-a6e1-db11f8d0e139&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns 404 - not found&quot;,&quot;fullTitle&quot;:&quot;DELETE /bids/:bidId returns 404 - not found&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:30,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;cy.request({\n  url: \&quot;http://localhost:3000/api/products/not-existing-id\&quot;,\n  method: \&quot;DELETE\&quot;,\n  headers: {\n    Authorization: `Bearer ${_tokens.aliceToken}`\n  },\n  failOnStatusCode: false\n}).its(\&quot;status\&quot;).should(\&quot;equal\&quot;, 404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;267ce8be-e934-454d-bc23-836eaa24c980&quot;,&quot;parentUUID&quot;:&quot;2600997b-0f53-40ea-a6e1-db11f8d0e139&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;check mutation - object deleted in database&quot;,&quot;fullTitle&quot;:&quot;DELETE /bids/:bidId check mutation - object deleted in database&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:39,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;cy.request({\n  url: \&quot;http://localhost:3000/api/products/a0f7c522-78f8-442e-a55d-642cfe566634\&quot;,\n  method: \&quot;GET\&quot;,\n  headers: {\n    Authorization: `Bearer ${_tokens.aliceToken}`\n  }\n}).then(response =&gt; {\n  const product = response.body;\n  expect(product.bids.some(bid =&gt; bid.id === \&quot;8ccc6e79-f3c9-43e9-b47e-5be7b84d8de7\&quot;)).to.be.true;\n  cy.request({\n    url: endpoint,\n    method: \&quot;DELETE\&quot;,\n    headers: {\n      Authorization: `Bearer ${_tokens.charlyToken}`\n    }\n  }).then(response =&gt; {\n    expect(response.status).to.be.eq(204);\n    cy.request({\n      url: \&quot;http://localhost:3000/api/products/a0f7c522-78f8-442e-a55d-642cfe566634\&quot;,\n      method: \&quot;GET\&quot;,\n      headers: {\n        Authorization: `Bearer ${_tokens.aliceToken}`\n      },\n      failOnStatusCode: false\n    }).then(response =&gt; {\n      const product = response.body;\n      expect(product.bids.some(bid =&gt; bid.id === \&quot;8ccc6e79-f3c9-43e9-b47e-5be7b84d8de7\&quot;)).to.be.false;\n    });\n  });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ba62fe79-e9e4-4102-909c-1b1db7417b6b&quot;,&quot;parentUUID&quot;:&quot;2600997b-0f53-40ea-a6e1-db11f8d0e139&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b4205623-8cb6-41ff-9b50-efc7363f5970&quot;,&quot;ec3bb8ea-a644-40ff-b097-78a039a88d77&quot;,&quot;92381970-17c4-4d97-b89c-2d1aed1613ee&quot;,&quot;c3af65c2-af2a-479c-bd00-67c6be6e25ef&quot;,&quot;267ce8be-e934-454d-bc23-836eaa24c980&quot;,&quot;ba62fe79-e9e4-4102-909c-1b1db7417b6b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:179,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5c55256b-c179-43fe-a9ae-c579383656a5&quot;,&quot;title&quot;:&quot;GET /api/users/:userId&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;returns 404 - not found&quot;,&quot;fullTitle&quot;:&quot;GET /api/users/:userId returns 404 - not found&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:30,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;cy.request({\n  url: \&quot;http://localhost:3000/api/users/not-existing-id\&quot;,\n  failOnStatusCode: false\n}).its(\&quot;status\&quot;).should(\&quot;equal\&quot;, 404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bfbd2854-fcce-4873-be3f-e77074d91272&quot;,&quot;parentUUID&quot;:&quot;5c55256b-c179-43fe-a9ae-c579383656a5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;returns 200 - success&quot;,&quot;fullTitle&quot;:&quot;GET /api/users/:userId returns 200 - success&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:116,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;cy.request(\&quot;http://localhost:3000/api/users/1f2fadb1-0d7e-47a7-9d5b-ed031d665d3e\&quot;).then(response =&gt; {\n  expect(response.status).to.be.eq(200);\n  expect(response.headers[\&quot;content-type\&quot;]).to.contains(\&quot;application/json\&quot;);\n  const user = response.body;\n  expect(user.id).to.eq(\&quot;1f2fadb1-0d7e-47a7-9d5b-ed031d665d3e\&quot;);\n  expect(user.username).to.be.eq(\&quot;alice\&quot;);\n  expect(user.admin).to.be.false;\n  for (let product of user.products) {\n    expect(product.id).to.be.a(\&quot;string\&quot;);\n    expect(product.id).to.match(_pattern.UUIDv4);\n    expect(product.description).to.be.a(\&quot;string\&quot;);\n    expect(product.category).to.be.a(\&quot;string\&quot;);\n    expect(product.originalPrice).to.be.a(\&quot;number\&quot;);\n    expect(product.pictureUrl).to.be.a(\&quot;string\&quot;);\n    expect(product.endDate).to.be.a(\&quot;string\&quot;);\n    expect(product.endDate).to.match(_pattern.IOS8601);\n  }\n  for (let bid of user.bids) {\n    expect(bid.id).to.be.a(\&quot;string\&quot;);\n    expect(bid.id).to.match(_pattern.UUIDv4);\n    expect(bid.price).to.be.a(\&quot;number\&quot;);\n    expect(bid.date).to.be.a(\&quot;string\&quot;);\n    expect(bid.date).to.match(_pattern.IOS8601);\n    expect(bid.product.id).to.a(\&quot;string\&quot;);\n    expect(bid.product.id).to.match(_pattern.UUIDv4);\n    expect(bid.product.name).to.a(\&quot;string\&quot;);\n  }\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a4c421ab-f511-4370-bbe9-a6b05f8911cf&quot;,&quot;parentUUID&quot;:&quot;5c55256b-c179-43fe-a9ae-c579383656a5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bfbd2854-fcce-4873-be3f-e77074d91272&quot;,&quot;a4c421ab-f511-4370-bbe9-a6b05f8911cf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:146,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;7.0.1&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:false,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;options&quot;:{&quot;reportDir&quot;:&quot;cypress/results&quot;,&quot;overwrite&quot;:false,&quot;html&quot;:false,&quot;json&quot;:true},&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;frontend&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:false,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report/assets&quot;,&quot;htmlFile&quot;:&quot;/Users/gaetan/Documents/Developpement/Depots Git/bidbay-starter/frontend/mochawesome-report/mochawesome.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>